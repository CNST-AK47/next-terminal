"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[4205],{64205:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}});var r=n(1413),a=n(74165),i=n(15861),o=n(15671),l=n(43144),c=n(60136),u=n(27277),s=n(47313),f=n(39548),d=n(99242),v=n(72555),m=n(81690),p=n(96675),h=n(1898),g=n(92754),y=n(22121),Z=n(95436),b=n(96543),x=n(89755),w=n(91372),C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},j=(0,s.forwardRef)((function(e,t){var n=e.chartRef,r=e.style,a=void 0===r?{height:"inherit"}:r,i=e.className,o=e.loading,l=e.loadingTemplate,c=e.errorTemplate,u=C(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),f=(0,Z.Z)(y.by,u),d=f.chart,v=f.container;return(0,s.useEffect)((function(){(0,b.J)(n,d.current)}),[d.current]),(0,s.useImperativeHandle)(t,(function(){return{getChart:function(){return d.current}}})),s.createElement(x.Z,{errorTemplate:c},o&&s.createElement(w.Z,{loadingTemplate:l,theme:e.theme}),s.createElement("div",{className:i,style:a,ref:v}))})),E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},N=(0,s.forwardRef)((function(e,t){var n=e.chartRef,r=e.style,a=void 0===r?{height:"inherit"}:r,i=e.className,o=e.loading,l=e.loadingTemplate,c=e.errorTemplate,u=E(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),f=(0,Z.Z)(y.x1,u),d=f.chart,v=f.container;return(0,s.useEffect)((function(){(0,b.J)(n,d.current)}),[d.current]),(0,s.useImperativeHandle)(t,(function(){return{getChart:function(){return d.current}}})),s.createElement(x.Z,{errorTemplate:c},o&&s.createElement(w.Z,{loadingTemplate:l,theme:e.theme}),s.createElement("div",{className:i,style:a,ref:v}))})),S=n(4942),O=n(87462),k=n(71002),A=n(46123),R=n.n(A),P=n(29439),T=n(44925);function M(e){var t=s.useRef();t.current=e;var n=s.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}var D="undefined"!==typeof window&&window.document&&window.document.createElement?s.useLayoutEffect:s.useEffect,I=function(e,t){var n=s.useRef(!0);D((function(){return e(n.current)}),t),D((function(){return n.current=!1,function(){n.current=!0}}),[])},F=function(e,t){I((function(t){if(!t)return e()}),t)},V=I;function z(e){var t=s.useRef(!1),n=s.useState(e),r=(0,P.Z)(n,2),a=r[0],i=r[1];return s.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[a,function(e,n){n&&t.current||i(e)}]}function L(e){return void 0!==e}n(96214);function U(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){!function(e,t){"function"===typeof e?e(t):"object"===(0,k.Z)(e)&&e&&"current"in e&&(e.current=t)}(t,e)}))}}var W=n(65954),H=function(e){return e?{left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth}:null},_=function(e){return void 0!==e?"".concat(e,"px"):void 0};function J(e){var t=e.prefixCls,n=e.containerRef,a=e.value,i=e.getValueIndex,o=e.motionName,l=e.onMotionStart,c=e.onMotionEnd,u=e.direction,f=s.useRef(null),d=s.useState(a),v=(0,P.Z)(d,2),m=v[0],p=v[1],h=function(e){var r,a=i(e),o=null===(r=n.current)||void 0===r?void 0:r.querySelectorAll(".".concat(t,"-item"))[a];return(null===o||void 0===o?void 0:o.offsetParent)&&o},g=s.useState(null),y=(0,P.Z)(g,2),Z=y[0],b=y[1],x=s.useState(null),w=(0,P.Z)(x,2),C=w[0],j=w[1];V((function(){if(m!==a){var e=h(m),t=h(a),n=H(e),r=H(t);p(a),b(n),j(r),e&&t?l():c()}}),[a]);var E=s.useMemo((function(){return _("rtl"===u?-(null===Z||void 0===Z?void 0:Z.right):null===Z||void 0===Z?void 0:Z.left)}),[u,Z]),N=s.useMemo((function(){return _("rtl"===u?-(null===C||void 0===C?void 0:C.right):null===C||void 0===C?void 0:C.left)}),[u,C]);return Z&&C?s.createElement(W.ZP,{visible:!0,motionName:o,motionAppear:!0,onAppearStart:function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},onAppearActive:function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},onAppearEnd:function(){b(null),j(null),c()}},(function(e,n){var a=e.className,i=e.style,o=(0,r.Z)((0,r.Z)({},i),{},{"--thumb-start-left":E,"--thumb-start-width":_(null===Z||void 0===Z?void 0:Z.width),"--thumb-active-left":N,"--thumb-active-width":_(null===C||void 0===C?void 0:C.width)}),l={ref:U(f,n),style:o,className:R()("".concat(t,"-thumb"),a)};return s.createElement("div",l)})):null}var X=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function q(e){return e.map((function(e){if("object"===(0,k.Z)(e)&&null!==e){var t=function(e){return"undefined"!==typeof e.title?e.title:"object"!==(0,k.Z)(e.label)?null===(t=e.label)||void 0===t?void 0:t.toString():void 0;var t}(e);return(0,r.Z)((0,r.Z)({},e),{},{title:t})}return{label:null===e||void 0===e?void 0:e.toString(),title:null===e||void 0===e?void 0:e.toString(),value:e}}))}var B=function(e){var t=e.prefixCls,n=e.className,r=e.disabled,a=e.checked,i=e.label,o=e.title,l=e.value,c=e.onChange;return s.createElement("label",{className:R()(n,(0,S.Z)({},"".concat(t,"-item-disabled"),r))},s.createElement("input",{className:"".concat(t,"-item-input"),type:"radio",disabled:r,checked:a,onChange:function(e){r||c(e,l)}}),s.createElement("div",{className:"".concat(t,"-item-label"),title:o},i))},K=s.forwardRef((function(e,t){var n,a,i=e.prefixCls,o=void 0===i?"rc-segmented":i,l=e.direction,c=e.options,u=e.disabled,f=e.defaultValue,d=e.value,v=e.onChange,m=e.className,p=void 0===m?"":m,h=e.motionName,g=void 0===h?"thumb-motion":h,y=(0,T.Z)(e,X),Z=s.useRef(null),b=s.useMemo((function(){return U(Z,t)}),[Z,t]),x=s.useMemo((function(){return q(c)}),[c]),w=function(e,t){var n=t||{},r=n.defaultValue,a=n.value,i=n.onChange,o=n.postState,l=z((function(){return L(a)?a:L(r)?"function"===typeof r?r():r:"function"===typeof e?e():e})),c=(0,P.Z)(l,2),u=c[0],s=c[1],f=void 0!==a?a:u,d=o?o(f):f,v=M(i),m=z([f]),p=(0,P.Z)(m,2),h=p[0],g=p[1];return F((function(){var e=h[0];u!==e&&v(u,e)}),[h]),F((function(){L(a)||s(a)}),[a]),[d,M((function(e,t){s(e,t),g([f],t)}))]}(null===(n=x[0])||void 0===n?void 0:n.value,{value:d,defaultValue:f}),C=(0,P.Z)(w,2),j=C[0],E=C[1],N=s.useState(!1),k=(0,P.Z)(N,2),A=k[0],D=k[1],I=function(e,t){u||(E(t),null===v||void 0===v||v(t))},V=function(e,t){var n=(0,r.Z)({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}(y,["children"]);return s.createElement("div",(0,O.Z)({},V,{className:R()(o,(a={},(0,S.Z)(a,"".concat(o,"-rtl"),"rtl"===l),(0,S.Z)(a,"".concat(o,"-disabled"),u),a),p),ref:b}),s.createElement("div",{className:"".concat(o,"-group")},s.createElement(J,{prefixCls:o,value:j,containerRef:Z,motionName:"".concat(o,"-").concat(g),direction:l,getValueIndex:function(e){return x.findIndex((function(t){return t.value===e}))},onMotionStart:function(){D(!0)},onMotionEnd:function(){D(!1)}}),x.map((function(e){return s.createElement(B,(0,O.Z)({key:e.value,prefixCls:o,className:R()(e.className,"".concat(o,"-item"),(0,S.Z)({},"".concat(o,"-item-selected"),e.value===j&&!A)),checked:e.value===j,onChange:I},e,{disabled:!!u||!!e.disabled}))}))))}));K.displayName="Segmented",K.defaultProps={options:[]};var G=K,Q=n(74714),Y=n(21631),$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var ee=s.forwardRef((function(e,t){var n,r=e.prefixCls,a=e.className,i=e.block,o=e.options,l=void 0===o?[]:o,c=e.size,u=void 0===c?"middle":c,f=$(e,["prefixCls","className","block","options","size"]),d=s.useContext(Q.E_),v=d.getPrefixCls,m=d.direction,p=v("segmented",r),h=s.useContext(Y.Z),g=u||h,y=s.useMemo((function(){return l.map((function(e){if(function(e){return"object"===(0,k.Z)(e)&&!!(null===e||void 0===e?void 0:e.icon)}(e)){var t=e.icon,n=e.label,r=$(e,["icon","label"]);return(0,O.Z)((0,O.Z)({},r),{label:s.createElement(s.Fragment,null,s.createElement("span",{className:"".concat(p,"-item-icon")},t),n&&s.createElement("span",null,n))})}return e}))}),[l,p]);return s.createElement(G,(0,O.Z)({},f,{className:R()(a,(n={},(0,S.Z)(n,"".concat(p,"-block"),i),(0,S.Z)(n,"".concat(p,"-sm"),"small"===g),(0,S.Z)(n,"".concat(p,"-lg"),"large"===g),n)),options:y,ref:t,prefixCls:p,direction:m}))})),te=n(46417),ne=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={counter:{onlineUser:0,totalUser:0,activeAsset:0,totalAsset:0,failLoginCount:0,offlineSession:0},asset:{ssh:0,rdp:0,vnc:0,telnet:0,kubernetes:0},dateCounter:[]},e.getCounter=(0,i.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Z.get("/overview/counter");case 2:1===(n=t.sent).code&&e.setState({counter:n.data});case 4:case"end":return t.stop()}}),t)}))),e.getDateCounter=function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Z.get("/overview/date-counter?d="+n);case 2:1===(r=t.sent).code&&e.setState({dateCounter:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getAsset=(0,i.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Z.get("/overview/asset");case 2:1===(n=t.sent).code&&e.setState({asset:n.data});case 4:case"end":return t.stop()}}),t)}))),e.handleChangeDateCounter=function(t){"\u6309\u5468"===t?e.getDateCounter("week"):e.getDateCounter("month")},e}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){this.getCounter(),this.getAsset(),this.getDateCounter("week")}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e={width:200,height:200,appendPadding:10,data:[{type:"RDP",value:this.state.asset.rdp},{type:"SSH",value:this.state.asset.ssh},{type:"TELNET",value:this.state.asset.telnet},{type:"VNC",value:this.state.asset.vnc},{type:"Kubernetes",value:this.state.asset.kubernetes}],angleField:"value",colorField:"type",radius:1,innerRadius:.6,label:{type:"inner",offset:"-50%",content:"{value}",style:{textAlign:"center",fontSize:14}},interactions:[{type:"element-selected"},{type:"element-active"}],statistic:{title:!1,content:{formatter:function(){return"\u8d44\u4ea7\u7c7b\u578b"},style:{fontSize:18}}}},t={height:270,data:this.state.dateCounter,xField:"date",yField:"value",seriesField:"type",legend:{position:"top"},smooth:!0,animation:{appear:{animation:"path-in",duration:5e3}}};return(0,te.jsx)(te.Fragment,{children:(0,te.jsxs)("div",{style:{margin:16},children:[(0,te.jsx)(h.Z,{title:"\u6570\u636e\u6982\u89c8",split:"horizontal",headerBordered:!0,bordered:!0,children:(0,te.jsxs)(h.Z,{split:"vertical",children:[(0,te.jsxs)(h.Z,{split:"horizontal",children:[(0,te.jsxs)(h.Z,{split:"vertical",children:[(0,te.jsx)(g.Z,{statistic:{title:"\u5728\u7ebf\u7528\u6237",value:this.state.counter.onlineUser+"/"+this.state.counter.totalUser,prefix:(0,te.jsx)(f.Z,{})}}),(0,te.jsx)(g.Z,{statistic:{title:"\u8fd0\u884c\u4e2d\u8d44\u4ea7",value:this.state.counter.activeAsset+"/"+this.state.counter.totalAsset,prefix:(0,te.jsx)(d.Z,{})}})]}),(0,te.jsxs)(h.Z,{split:"vertical",children:[(0,te.jsx)(g.Z,{statistic:{title:"\u767b\u5f55\u5931\u8d25\u6b21\u6570",value:this.state.counter.failLoginCount,prefix:(0,te.jsx)(v.Z,{})}}),(0,te.jsx)(g.Z,{statistic:{title:"\u5386\u53f2\u4f1a\u8bdd\u603b\u6570",value:this.state.counter.offlineSession,prefix:(0,te.jsx)(m.Z,{})}})]})]}),(0,te.jsx)(h.Z,{className:"pie-card",children:(0,te.jsx)(h.Z,{children:(0,te.jsx)(j,(0,r.Z)({},e))})})]})}),(0,te.jsx)(h.Z,{title:"\u4f1a\u8bdd\u7edf\u8ba1",style:{marginTop:16},extra:(0,te.jsx)(ee,{options:["\u6309\u5468","\u6309\u6708"],onChange:this.handleChangeDateCounter}),children:(0,te.jsx)(N,(0,r.Z)({},t))})]})})}}]),n}(s.Component),re=ne}}]);