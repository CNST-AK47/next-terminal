"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[9594],{58374:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(74165),a=n(15861),c=n(43144),s=n(15671),u=n(96675),o=n(74776),i=n.n(o),l=(0,c.Z)((function e(t){var n=this;(0,s.Z)(this,e),this.group="",this.getById=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("/".concat(n.group,"/").concat(t));case 2:if(1===(a=e.sent).code){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPaging=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i().stringify(t),e.next=3,u.Z.get("/".concat(n.group,"/paging?").concat(a));case 3:if(1===(c=e.sent).code){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAll=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("/".concat(n.group));case 2:if(1===(t=e.sent).code){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)}))),this.create=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.post("/".concat(n.group),t);case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateById=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,a){var c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.put("/".concat(n.group,"/").concat(t),a);case 2:return c=e.sent,e.abrupt("return",1===c.code);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.deleteById=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.delete("/".concat(n.group,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.group=t}))},66530:function(e,t,n){var r=n(74165),a=n(15861),c=n(43144),s=n(15671),u=n(60136),o=n(27277),i=n(58374),l=n(96675),d=function(e){(0,u.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,"assets")).GetAll=(0,a.Z)((0,r.Z)().mark((function t(){var n,a,c=arguments;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:"",t.next=3,l.Z.get("/".concat(e.group,"?protocol=").concat(n));case 3:if(1===(a=t.sent).code){t.next=6;break}return t.abrupt("return",[]);case 6:return t.abrupt("return",a.data);case 7:case"end":return t.stop()}}),t)}))),e.connTest=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.post("/".concat(e.group,"/").concat(n,"/tcping"));case 2:if(1===(a=t.sent).code){t.next=5;break}return t.abrupt("return",[!1,a.message]);case 5:return t.abrupt("return",[a.data.active,a.data.message]);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.importAsset=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("file",n),t.next=4,l.Z.post("/".concat(e.group,"/import"),a,{"Content-Type":"multipart/form-data"});case 4:if(1===(c=t.sent).code){t.next=7;break}return t.abrupt("return",[!1,c.message]);case 7:return t.abrupt("return",[!0,c.data]);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeOwner=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.post("/".concat(e.group,"/").concat(n,"/change-owner?owner=").concat(a));case 2:return c=t.sent,t.abrupt("return",1===c.code);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return(0,c.Z)(n)}(i.Z),p=new d;t.Z=p},29261:function(e,t,n){var r=n(74165),a=n(15861),c=n(43144),s=n(15671),u=n(74776),o=n.n(u),i=n(96675),l=(0,c.Z)((function e(){var t=this;(0,s.Z)(this,e),this.group="authorised",this.GetAssetPaging=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o().stringify(n),e.next=3,i.Z.get("/".concat(t.group,"/assets/paging?").concat(a));case 3:if(1===(c=e.sent).code){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.GetUserPaging=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o().stringify(n),e.next=3,i.Z.get("/".concat(t.group,"/users/paging?").concat(a));case 3:if(1===(c=e.sent).code){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.GetUserGroupPaging=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o().stringify(n),e.next=3,i.Z.get("/".concat(t.group,"/user-groups/paging?").concat(a));case 3:if(1===(c=e.sent).code){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.AuthorisedAssets=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("/".concat(t.group,"/assets"),n);case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.AuthorisedUsers=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("/".concat(t.group,"/users"),n);case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.AuthorisedUserGroups=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("/".concat(t.group,"/user-groups"),n);case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.GetSelected=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o().stringify(n),e.next=3,i.Z.get("/".concat(t.group,"/selected?").concat(a));case 3:if(1===(c=e.sent).code){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.DeleteById=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.delete("/".concat(t.group,"/").concat(n));case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),d=new l;t.Z=d},53485:function(e,t,n){var r=n(74165),a=n(15861),c=n(43144),s=n(15671),u=n(60136),o=n(27277),i=n(58374),l=n(96675),d=new(function(e){(0,u.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,"strategies")).GetAll=(0,a.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.get("/".concat(e.group));case 2:if(1===(n=t.sent).code){t.next=5;break}return t.abrupt("return",[]);case 5:return t.abrupt("return",n.data);case 6:case"end":return t.stop()}}),t)}))),e}return(0,c.Z)(n)}(i.Z));t.Z=d},89170:function(e,t,n){var r=n(74165),a=n(15861),c=n(43144),s=n(15671),u=n(60136),o=n(27277),i=n(58374),l=n(96675),d=new(function(e){(0,u.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,"user-groups")).GetAll=(0,a.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.get("/".concat(e.group));case 2:if(1===(n=t.sent).code){t.next=5;break}return t.abrupt("return",[]);case 5:return t.abrupt("return",n.data);case 6:case"end":return t.stop()}}),t)}))),e}return(0,c.Z)(n)}(i.Z));t.Z=d},27777:function(e,t,n){var r=n(74165),a=n(15861),c=n(43144),s=n(15671),u=n(60136),o=n(27277),i=n(58374),l=n(96675),d=function(e){(0,u.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,"users")).resetTotp=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.post("/".concat(e.group,"/").concat(n,"/reset-totp"));case 2:return a=t.sent,t.abrupt("return",1===a.code);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changePassword=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){var c,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(c=new FormData).set("password",a),t.next=4,l.Z.post("/".concat(e.group,"/").concat(n,"/change-password"),c);case 4:return s=t.sent,t.abrupt("return",1===s.code);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.changeStatus=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.patch("/".concat(e.group,"/").concat(n,"/status?status=").concat(a));case 2:return c=t.sent,t.abrupt("return",1!==c.code);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return(0,c.Z)(n)}(i.Z),p=new d;t.Z=p},19594:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var r=n(29439),a=n(47313),c=n(58467),s=n(2135),u=n(94098),o=n(74165),i=n(15861),l=n(66530),d=n(83371),p=n(46417),f=l.Z,Z=function(e){var t=e.active,n=e.id,c=(0,a.useState)({}),s=(0,r.Z)(c,2),u=s[0],l=s[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getById(t);case 2:(n=e.sent)&&l(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t&&n&&e(n)}),[t]),(0,p.jsx)("div",{className:"page-detail-info",children:(0,p.jsxs)(d.Z,{column:1,children:[(0,p.jsx)(d.Z.Item,{label:"\u8d44\u4ea7\u540d\u79f0",children:u.name}),(0,p.jsx)(d.Z.Item,{label:"\u534f\u8bae",children:u.protocol}),(0,p.jsx)(d.Z.Item,{label:"IP",children:u.ip}),(0,p.jsx)(d.Z.Item,{label:"\u7aef\u53e3",children:u.port}),(0,p.jsx)(d.Z.Item,{label:"\u6807\u7b7e",children:u.tags}),(0,p.jsx)(d.Z.Item,{label:"\u521b\u5efa\u65f6\u95f4",children:u.created})]})})},h=n(20955),v=n(59491),m=n(29261),x=n(53469),b=n(1413),g=n(12008),y=n(96296),w=n(74294),k=n(89170),j=n(53485),C={labelCol:{span:6},wrapperCol:{span:14}},I=function(e){var t=e.id,n=e.visible,c=e.handleOk,s=e.handleCancel,u=e.confirmLoading,l=g.Z.useForm(),d=(0,r.Z)(l,1)[0],f=(0,a.useState)([]),Z=(0,r.Z)(f,2),h=Z[0],v=Z[1],x=(0,a.useState)([]),I=(0,r.Z)(x,2),S=I[0],E=I[1],N=(0,a.useState)([]),O=(0,r.Z)(N,2),G=O[0],P=O[1];(0,a.useEffect)((function(){function e(){return e=(0,i.Z)((0,o.Z)().mark((function e(){var n,r,a,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={key:"userGroupId",assetId:t},e.next=3,m.Z.GetSelected(n);case 3:return r=e.sent,v(r),e.next=7,k.Z.getAll();case 7:return a=e.sent,E(a),e.next=11,j.Z.getAll();case 11:c=e.sent,P(c);case 13:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}n?function(){e.apply(this,arguments)}():d.resetFields()}),[n]);var A=G.map((function(e){return{value:e.id,label:e.name}})),L=S.map((function(e){return{value:e.id,label:e.name,disabled:h.includes(e.id)}}));return(0,p.jsx)(y.Z,{title:"\u7528\u6237\u6388\u6743",visible:n,maskClosable:!1,destroyOnClose:!0,onOk:function(){d.validateFields().then(function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:e.sent&&d.resetFields();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){d.resetFields(),s()},confirmLoading:u,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,p.jsxs)(g.Z,(0,b.Z)((0,b.Z)({form:d},C),{},{children:[(0,p.jsx)(g.Z.Item,{label:"\u7528\u6237\u7ec4",name:"userGroupIds",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7528\u6237\u7ec4"}],children:(0,p.jsx)(w.Z,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u7528\u6237\u7ec4",showSearch:!0,filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:L})}),(0,p.jsx)(g.Z.Item,{label:"\u6388\u6743\u7b56\u7565",name:"strategyId",extra:"\u53ef\u63a7\u5236\u6388\u6743\u7528\u6237\u4e0a\u4f20\u4e0b\u8f7d\u6587\u4ef6\u7b49\u529f\u80fd",children:(0,p.jsx)(w.Z,{allowClear:!0,style:{width:"100%"},placeholder:"\u6b64\u5b57\u6bb5\u4e0d\u662f\u5fc5\u586b\u7684",showSearch:!0,filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:A})})]}))})},S=n(87591),E=a.createRef(),N=function(e){var t=e.id,n=e.active,c=(0,a.useState)(!1),u=(0,r.Z)(c,2),l=u[0],d=u[1],f=(0,a.useState)(!1),Z=(0,r.Z)(f,2),h=Z[0],b=Z[1];(0,a.useEffect)((function(){n&&E.current.reload()}),[n]);var g=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u7528\u6237\u7ec4\u540d\u79f0",dataIndex:"userGroupName",render:function(e,t){return(0,p.jsx)(s.rU,{to:"/user-group/".concat(t.userGroupId),children:e})}},{title:"\u6388\u6743\u7b56\u7565\u540d\u79f0",dataIndex:"strategyName",hideInSearch:!0,render:function(e,t){return(0,p.jsx)(s.rU,{to:"/strategy/".concat(t.strategyId),children:e})}},{title:"\u6388\u6743\u65e5\u671f",key:"created",dataIndex:"created",hideInSearch:!0},{title:"\u64cd\u4f5c",valueType:"option",key:"option",width:50,render:function(e,t,n,r){return[(0,p.jsx)(S.Z,{menu:"asset-authorised-user-group-del",children:(0,p.jsx)("a",{onClick:(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.DeleteById(t.id);case 2:E.current.reload();case 3:case"end":return e.stop()}}),e)}))),children:"\u79fb\u9664"},"unbind")},"unbind-acc")]}}];return(0,p.jsxs)("div",{children:[(0,p.jsx)(x.Z,{columns:g,actionRef:E,request:(0,i.Z)((0,o.Z)().mark((function e(){var n,r,a,c,s,u,i=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},r=i.length>1?i[1]:void 0,i.length>2?i[2]:void 0,a="",c="",Object.keys(r).length>0&&(a=Object.keys(r)[0],c=Object.values(r)[0]),s={pageIndex:n.current,pageSize:n.pageSize,name:n.name,assetId:t,field:a,order:c},e.next=9,m.Z.GetUserGroupPaging(s);case 9:return u=e.sent,e.abrupt("return",{data:u.items,success:!0,total:u.total});case 11:case"end":return e.stop()}}),e)}))),rowKey:"id",search:{labelWidth:"auto"},pagination:{defaultPageSize:10},dateFormatter:"string",headerTitle:"\u6388\u6743\u7684\u7528\u6237\u7ec4\u5217\u8868",toolBarRender:function(){return[(0,p.jsx)(S.Z,{menu:"asset-authorised-user-group-add",children:(0,p.jsx)(v.Z,{type:"primary",onClick:function(){d(!0)},children:"\u6388\u6743"},"button")},"bind-acc")]}}),(0,p.jsx)(I,{id:t,visible:l,confirmLoading:h,handleCancel:function(){d(!1)},handleOk:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),n.assetId=t;try{m.Z.AuthorisedUserGroups(n)&&d(!1),E.current.reload()}finally{b(!1)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},O=n(15253),G=u.Z.TabPane,P=function(){var e=(0,c.UO)().assetId,t=(0,s.lr)(),n=(0,r.Z)(t,2),o=n[0],i=n[1],l=o.get("activeKey");l=l||"info";var d=(0,a.useState)(l),f=(0,r.Z)(d,2),v=f[0],m=f[1];return(0,p.jsx)("div",{className:"page-detail-warp",children:(0,p.jsxs)(u.Z,{activeKey:v,onChange:function(e){m(e),i({activeKey:e})},children:[(0,O.c1)("asset-detail")&&(0,p.jsx)(G,{tab:"\u57fa\u672c\u4fe1\u606f",children:(0,p.jsx)(Z,{active:"info"===v,id:e})},"info"),(0,O.c1)("asset-authorised-user")&&(0,p.jsx)(G,{tab:"\u6388\u6743\u7684\u7528\u6237",children:(0,p.jsx)(h.Z,{active:"bind-user"===v,id:e})},"bind-user"),(0,O.c1)("asset-authorised-user-group")&&(0,p.jsx)(G,{tab:"\u6388\u6743\u7684\u7528\u6237\u7ec4",children:(0,p.jsx)(N,{active:"bind-user-group"===v,id:e})},"bind-user-group")]})})}},20955:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(74165),a=n(15861),c=n(29439),s=n(47313),u=n(2135),o=n(29261),i=n(53469),l=n(59491),d=n(1413),p=n(12008),f=n(96296),Z=n(74294),h=n(53485),v=n(27777),m=n(46417),x={labelCol:{span:6},wrapperCol:{span:14}},b=function(e){var t=e.id,n=e.visible,u=e.handleOk,i=e.handleCancel,l=e.confirmLoading,b=p.Z.useForm(),g=(0,c.Z)(b,1)[0],y=(0,s.useState)([]),w=(0,c.Z)(y,2),k=w[0],j=w[1],C=(0,s.useState)([]),I=(0,c.Z)(C,2),S=I[0],E=I[1],N=(0,s.useState)([]),O=(0,c.Z)(N,2),G=O[0],P=O[1];(0,s.useEffect)((function(){function e(){return e=(0,a.Z)((0,r.Z)().mark((function e(){var n,a,c,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={key:"userId",assetId:t},e.next=3,o.Z.GetSelected(n);case 3:return a=e.sent,j(a),e.next=7,v.Z.getAll();case 7:return c=e.sent,E(c),e.next=11,h.Z.getAll();case 11:s=e.sent,P(s);case 13:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}n?function(){e.apply(this,arguments)}():g.resetFields()}),[n]);var A=G.map((function(e){return{value:e.id,label:e.name}})),L=S.map((function(e){return{value:e.id,label:e.nickname,disabled:k.includes(e.id)}}));return(0,m.jsx)(f.Z,{title:"\u7528\u6237\u6388\u6743",visible:n,maskClosable:!1,destroyOnClose:!0,onOk:function(){g.validateFields().then(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:e.sent&&g.resetFields();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){g.resetFields(),i()},confirmLoading:l,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,m.jsxs)(p.Z,(0,d.Z)((0,d.Z)({form:g},x),{},{children:[(0,m.jsx)(p.Z.Item,{label:"\u7528\u6237",name:"userIds",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7528\u6237"}],children:(0,m.jsx)(Z.Z,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u7528\u6237",showSearch:!0,filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:L})}),(0,m.jsx)(p.Z.Item,{label:"\u6388\u6743\u7b56\u7565",name:"strategyId",extra:"\u53ef\u63a7\u5236\u6388\u6743\u7528\u6237\u4e0a\u4f20\u4e0b\u8f7d\u6587\u4ef6\u7b49\u529f\u80fd",children:(0,m.jsx)(Z.Z,{allowClear:!0,style:{width:"100%"},placeholder:"\u6b64\u5b57\u6bb5\u4e0d\u662f\u5fc5\u586b\u7684",showSearch:!0,filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:A})})]}))})},g=n(87591),y=s.createRef(),w=function(e){var t=e.active,n=e.id,d=(0,s.useState)(!1),p=(0,c.Z)(d,2),f=p[0],Z=p[1],h=(0,s.useState)(!1),v=(0,c.Z)(h,2),x=v[0],w=v[1];(0,s.useEffect)((function(){t&&y.current.reload()}),[t]);var k=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u7528\u6237\u540d\u79f0",dataIndex:"userName",render:function(e,t){return(0,m.jsx)(u.rU,{to:"/user/".concat(t.userId),children:e})}},{title:"\u6388\u6743\u7b56\u7565\u540d\u79f0",dataIndex:"strategyName",hideInSearch:!0,render:function(e,t){return(0,m.jsx)(u.rU,{to:"/strategy/".concat(t.strategyId),children:e})}},{title:"\u6388\u6743\u65e5\u671f",key:"created",dataIndex:"created",hideInSearch:!0},{title:"\u64cd\u4f5c",valueType:"option",key:"option",width:50,render:function(e,t,n,c){return[(0,m.jsx)(g.Z,{menu:"asset-authorised-user-del",children:(0,m.jsx)("a",{onClick:(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.DeleteById(t.id);case 2:y.current.reload();case 3:case"end":return e.stop()}}),e)}))),children:"\u79fb\u9664"},"unbind")},"unbind-acc")]}}];return(0,m.jsxs)("div",{children:[(0,m.jsx)(i.Z,{columns:k,actionRef:y,request:(0,a.Z)((0,r.Z)().mark((function e(){var t,a,c,s,u,i,l=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},a=l.length>1?l[1]:void 0,l.length>2?l[2]:void 0,c="",s="",Object.keys(a).length>0&&(c=Object.keys(a)[0],s=Object.values(a)[0]),u={pageIndex:t.current,pageSize:t.pageSize,name:t.name,assetId:n,field:c,order:s},e.next=9,o.Z.GetUserPaging(u);case 9:return i=e.sent,e.abrupt("return",{data:i.items,success:!0,total:i.total});case 11:case"end":return e.stop()}}),e)}))),rowKey:"id",search:{labelWidth:"auto"},pagination:{defaultPageSize:10},dateFormatter:"string",headerTitle:"\u6388\u6743\u7684\u7528\u6237\u5217\u8868",toolBarRender:function(){return[(0,m.jsx)(g.Z,{menu:"asset-authorised-user-add",children:(0,m.jsx)(l.Z,{type:"primary",onClick:function(){Z(!0)},children:"\u6388\u6743"},"button")},"bind-acc")]}}),(0,m.jsx)(b,{id:n,visible:f,confirmLoading:x,handleCancel:function(){Z(!1)},handleOk:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!0),t.assetId=n;try{o.Z.AuthorisedUsers(t)&&Z(!1),y.current.reload()}finally{w(!1)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}},87591:function(e,t,n){var r=n(93433),a=n(15253);t.Z=function(e){var t=e.menu,n=e.children;if(Array.isArray(t)){if(a.c1.apply(void 0,(0,r.Z)(t)))return n}else if((0,a.c1)(t))return n}},83371:function(e,t,n){n.d(t,{K:function(){return b},Z:function(){return k}});var r=n(4942),a=n(29439),c=n(71002),s=n(46123),u=n.n(s),o=n(98138),i=n(47313),l=n(74714),d=n(48138),p=n(82324),f=function(e){return e.children},Z=n(87462);function h(e){return void 0!==e&&null!==e}var v=function(e){var t,n=e.itemPrefixCls,a=e.component,c=e.span,s=e.className,o=e.style,l=e.labelStyle,d=e.contentStyle,p=e.bordered,f=e.label,Z=e.content,v=e.colon,m=a;return p?i.createElement(m,{className:u()((t={},(0,r.Z)(t,"".concat(n,"-item-label"),h(f)),(0,r.Z)(t,"".concat(n,"-item-content"),h(Z)),t),s),style:o,colSpan:c},h(f)&&i.createElement("span",{style:l},f),h(Z)&&i.createElement("span",{style:d},Z)):i.createElement(m,{className:u()("".concat(n,"-item"),s),style:o,colSpan:c},i.createElement("div",{className:"".concat(n,"-item-container")},(f||0===f)&&i.createElement("span",{className:u()("".concat(n,"-item-label"),(0,r.Z)({},"".concat(n,"-item-no-colon"),!v)),style:l},f),(Z||0===Z)&&i.createElement("span",{className:u()("".concat(n,"-item-content")),style:d},Z)))};function m(e,t,n){var r=t.colon,a=t.prefixCls,c=t.bordered,s=n.component,u=n.type,o=n.showLabel,l=n.showContent,d=n.labelStyle,p=n.contentStyle;return e.map((function(e,t){var n=e.props,f=n.label,h=n.children,m=n.prefixCls,x=void 0===m?a:m,b=n.className,g=n.style,y=n.labelStyle,w=n.contentStyle,k=n.span,j=void 0===k?1:k,C=e.key;return"string"===typeof s?i.createElement(v,{key:"".concat(u,"-").concat(C||t),className:b,style:g,labelStyle:(0,Z.Z)((0,Z.Z)({},d),y),contentStyle:(0,Z.Z)((0,Z.Z)({},p),w),span:j,colon:r,component:s,itemPrefixCls:x,bordered:c,label:o?f:null,content:l?h:null}):[i.createElement(v,{key:"label-".concat(C||t),className:b,style:(0,Z.Z)((0,Z.Z)((0,Z.Z)({},d),g),y),span:1,colon:r,component:s[0],itemPrefixCls:x,bordered:c,label:f}),i.createElement(v,{key:"content-".concat(C||t),className:b,style:(0,Z.Z)((0,Z.Z)((0,Z.Z)({},p),g),w),span:2*j-1,component:s[1],itemPrefixCls:x,bordered:c,content:h})]}))}var x=function(e){var t=i.useContext(b),n=e.prefixCls,r=e.vertical,a=e.row,c=e.index,s=e.bordered;return r?i.createElement(i.Fragment,null,i.createElement("tr",{key:"label-".concat(c),className:"".concat(n,"-row")},m(a,e,(0,Z.Z)({component:"th",type:"label",showLabel:!0},t))),i.createElement("tr",{key:"content-".concat(c),className:"".concat(n,"-row")},m(a,e,(0,Z.Z)({component:"td",type:"content",showContent:!0},t)))):i.createElement("tr",{key:c,className:"".concat(n,"-row")},m(a,e,(0,Z.Z)({component:s?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},b=i.createContext({}),g={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function y(e,t,n){var r=e;return(void 0===t||t>n)&&(r=(0,d.Tm)(e,{span:n})),r}function w(e){var t,n=e.prefixCls,s=e.title,d=e.extra,f=e.column,Z=void 0===f?g:f,h=e.colon,v=void 0===h||h,m=e.bordered,w=e.layout,k=e.children,j=e.className,C=e.style,I=e.size,S=e.labelStyle,E=e.contentStyle,N=i.useContext(l.E_),O=N.getPrefixCls,G=N.direction,P=O("descriptions",n),A=i.useState({}),L=(0,a.Z)(A,2),F=L[0],T=L[1],U=function(e,t){if("number"===typeof e)return e;if("object"===(0,c.Z)(e))for(var n=0;n<p.c4.length;n++){var r=p.c4[n];if(t[r]&&void 0!==e[r])return e[r]||g[r]}return 3}(Z,F);i.useEffect((function(){var e=p.ZP.subscribe((function(e){"object"===(0,c.Z)(Z)&&T(e)}));return function(){p.ZP.unsubscribe(e)}}),[]);var B=function(e,t){var n=(0,o.Z)(e).filter((function(e){return e})),r=[],a=[],c=t;return n.forEach((function(e,s){var u,o=null===(u=e.props)||void 0===u?void 0:u.span,i=o||1;if(s===n.length-1)return a.push(y(e,o,c)),void r.push(a);i<c?(c-=i,a.push(e)):(a.push(y(e,i,c)),r.push(a),c=t,a=[])})),r}(k,U),z=i.useMemo((function(){return{labelStyle:S,contentStyle:E}}),[S,E]);return i.createElement(b.Provider,{value:z},i.createElement("div",{className:u()(P,(t={},(0,r.Z)(t,"".concat(P,"-").concat(I),I&&"default"!==I),(0,r.Z)(t,"".concat(P,"-bordered"),!!m),(0,r.Z)(t,"".concat(P,"-rtl"),"rtl"===G),t),j),style:C},(s||d)&&i.createElement("div",{className:"".concat(P,"-header")},s&&i.createElement("div",{className:"".concat(P,"-title")},s),d&&i.createElement("div",{className:"".concat(P,"-extra")},d)),i.createElement("div",{className:"".concat(P,"-view")},i.createElement("table",null,i.createElement("tbody",null,B.map((function(e,t){return i.createElement(x,{key:t,index:t,colon:v,prefixCls:P,vertical:"vertical"===w,bordered:m,row:e})})))))))}w.Item=f;var k=w}}]);