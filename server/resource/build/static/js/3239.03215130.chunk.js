"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[3239],{58374:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(74165),a=t(15861),s=t(43144),c=t(15671),l=t(96675),i=t(74776),o=t.n(i),u=(0,s.Z)((function e(n){var t=this;(0,c.Z)(this,e),this.group="",this.getById=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get("/".concat(t.group,"/").concat(n));case 2:if(1===(a=e.sent).code){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.getPaging=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o().stringify(n),e.next=3,l.Z.get("/".concat(t.group,"/paging?").concat(a));case 3:if(1===(s=e.sent).code){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.getAll=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get("/".concat(t.group));case 2:if(1===(n=e.sent).code){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)}))),this.create=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.post("/".concat(t.group),n);case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.updateById=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,a){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.put("/".concat(t.group,"/").concat(n),a);case 2:return s=e.sent,e.abrupt("return",1===s.code);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.deleteById=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.delete("/".concat(t.group,"/").concat(n));case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.group=n}))},66530:function(e,n,t){var r=t(74165),a=t(15861),s=t(43144),c=t(15671),l=t(60136),i=t(27277),o=t(58374),u=t(96675),d=function(e){(0,l.Z)(t,e);var n=(0,i.Z)(t);function t(){var e;return(0,c.Z)(this,t),(e=n.call(this,"assets")).GetAll=(0,a.Z)((0,r.Z)().mark((function n(){var t,a,s=arguments;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n.next=3,u.Z.get("/".concat(e.group,"?protocol=").concat(t));case 3:if(1===(a=n.sent).code){n.next=6;break}return n.abrupt("return",[]);case 6:return n.abrupt("return",a.data);case 7:case"end":return n.stop()}}),n)}))),e.connTest=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.Z.post("/".concat(e.group,"/").concat(t,"/tcping"));case 2:if(1===(a=n.sent).code){n.next=5;break}return n.abrupt("return",[!1,a.message]);case 5:return n.abrupt("return",[a.data.active,a.data.message]);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.importAsset=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t){var a,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=new FormData).append("file",t),n.next=4,u.Z.post("/".concat(e.group,"/import"),a,{"Content-Type":"multipart/form-data"});case 4:if(1===(s=n.sent).code){n.next=7;break}return n.abrupt("return",[!1,s.message]);case 7:return n.abrupt("return",[!0,s.data]);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.changeOwner=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t,a){var s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.Z.post("/".concat(e.group,"/").concat(t,"/change-owner?owner=").concat(a));case 2:return s=n.sent,n.abrupt("return",1===s.code);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),e}return(0,s.Z)(t)}(o.Z),h=new d;n.Z=h},827:function(e,n,t){var r=t(74165),a=t(15861),s=t(43144),c=t(15671),l=t(60136),i=t(27277),o=t(58374),u=t(96675),d=new(function(e){(0,l.Z)(t,e);var n=(0,i.Z)(t);function t(){var e;return(0,c.Z)(this,t),(e=n.call(this,"credentials")).getAll=(0,a.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.Z.get("/".concat(e.group));case 2:if(1===(t=n.sent).code){n.next=5;break}return n.abrupt("return",[]);case 5:return n.abrupt("return",t.data);case 6:case"end":return n.stop()}}),n)}))),e}return(0,s.Z)(t)}(o.Z));n.Z=d},82701:function(e,n,t){var r=t(74165),a=t(15861),s=t(43144),c=t(15671),l=t(96675),i=new((0,s.Z)((function e(){(0,c.Z)(this,e),this.getAll=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get("/tags");case 2:if(1===(n=e.sent).code){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})))})));n.Z=i},27777:function(e,n,t){var r=t(74165),a=t(15861),s=t(43144),c=t(15671),l=t(60136),i=t(27277),o=t(58374),u=t(96675),d=function(e){(0,l.Z)(t,e);var n=(0,i.Z)(t);function t(){var e;return(0,c.Z)(this,t),(e=n.call(this,"users")).resetTotp=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.Z.post("/".concat(e.group,"/").concat(t,"/reset-totp"));case 2:return a=n.sent,n.abrupt("return",1===a.code);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.changePassword=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t,a){var s,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(s=new FormData).set("password",a),n.next=4,u.Z.post("/".concat(e.group,"/").concat(t,"/change-password"),s);case 4:return c=n.sent,n.abrupt("return",1===c.code);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),e.changeStatus=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t,a){var s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.Z.patch("/".concat(e.group,"/").concat(t,"/status?status=").concat(a));case 2:return s=n.sent,n.abrupt("return",1!==s.code);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),e}return(0,s.Z)(t)}(o.Z),h=new d;n.Z=h},9388:function(e,n,t){t.d(n,{f:function(){return r}});var r={rdp:"cyan",ssh:"blue",telnet:"geekblue",vnc:"purple",kubernetes:"volcano"}},13239:function(e,n,t){t.r(n),t.d(n,{default:function(){return de}});var r=t(74165),a=t(15861),s=t(44925),c=t(29439),l=t(47313),i=t(15508),o=t(66204),u=t(74294),d=t(57325),h=t(41068),p=t(5900),x=t(11843),Z=t(23813),m=t(59491),f=t(61677),j=t(89255),v=t(96296),g=t(58467),b=t(2135),y=t(25761),k=t(53469),w=t(66530),I=t(82701),C=t(9388),S=t(99925),T=t(1413),O=t(66672),N=t(81572),A=t(75419),E=t(12008),F=t(39180),P=t(77272),R=t(50682),L=t(94098),V=t(96675),_=t(827),D=t(15378),G=t(99242),U=t(55080),K=t(46417),q=O.Z.TextArea,B=u.Z.Option,M=N.Z.Text,z=A.Z.Panel,H={ssh:[{text:"\u5bc6\u7801",value:"custom"},{text:"\u5bc6\u94a5",value:"private-key"},{text:"\u6388\u6743\u51ed\u8bc1",value:"credential"}],rdp:[{text:"\u5bc6\u7801",value:"custom"},{text:"\u6388\u6743\u51ed\u8bc1",value:"credential"}],vnc:[{text:"\u5bc6\u7801",value:"custom"},{text:"\u6388\u6743\u51ed\u8bc1",value:"credential"}],telnet:[{text:"\u5bc6\u7801",value:"custom"},{text:"\u6388\u6743\u51ed\u8bc1",value:"credential"}]},Y={labelCol:{span:6},wrapperCol:{span:16}},W={labelCol:{span:6},wrapperCol:{span:14}},J=function(e){var n=e.visible,t=e.handleOk,s=e.handleCancel,i=e.confirmLoading,o=e.id,h=e.copied,p=E.Z.useForm(),x=(0,c.Z)(p,1)[0],Z=(0,l.useState)("custom"),m=(0,c.Z)(Z,2),f=m[0],j=m[1],g=(0,l.useState)("rdp"),b=(0,c.Z)(g,2),y=b[0],k=b[1],C=(0,l.useState)(H.rdp),N=(0,c.Z)(C,2),J=N[0],Q=N[1],X=(0,l.useState)(!1),$=(0,c.Z)(X,2),ee=$[0],ne=$[1],te=(0,l.useState)([]),re=(0,c.Z)(te,2),ae=re[0],se=re[1],ce=(0,l.useState)(!1),le=(0,c.Z)(ce,2),ie=le[0],oe=le[1],ue=(0,l.useState)(!1),de=(0,c.Z)(ue,2),he=de[0],pe=de[1],xe=(0,l.useState)([]),Ze=(0,c.Z)(xe,2),me=Ze[0],fe=Ze[1],je=(0,l.useState)([]),ve=(0,c.Z)(je,2),ge=ve[0],be=ve[1],ye=(0,l.useState)([]),ke=(0,c.Z)(ye,2),we=ke[0],Ie=ke[1],Ce=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.Z.get("/storages/shares");case 2:1===(n=e.sent).code&&se(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.getById(o);case 2:if(n=e.sent){for(t in n["use-ssl"]="true"===n["use-ssl"],n["ignore-cert"]="true"===n["ignore-cert"],n["enable-drive"]="true"===n["enable-drive"],n["socks-proxy-enable"]="true"===n["socks-proxy-enable"],n["force-lossless"]="true"===n["force-lossless"],n)n.hasOwnProperty(t)&&"-"===n[t]&&(n[t]="");S.Z.hasText(n.tags)?n.tags=n.tags.split(","):n.tags=[],j(n.accountType),"credential"===n.accountType&&Se(),Q(H[n.protocol]),k(n.protocol),ne(n["use-ssl"]),oe(n["enable-drive"]),pe(n["socks-proxy-enable"]),x.setFieldsValue(n)}case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.Z.get("/access-gateways");case 2:1===(n=e.sent).code&&fe(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.Z.getAll();case 2:n=e.sent,be(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n?(o&&e(),s(),t()):x.setFieldsValue({accountType:f,protocol:y,port:3389,"enable-drive":!1,"force-lossless":!1,"socks-proxy-enable":!1,"ignore-cert":!1,"use-ssl":!1})}),[n]);var Se=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.Z.getAll();case 2:n=e.sent,Ie(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=function(e){j(e),"credential"===e&&Se()},Oe=(0,K.jsxs)("div",{className:"basic",style:{marginTop:16},children:[(0,K.jsx)(E.Z.Item,{label:"\u8d44\u4ea7\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u4ea7\u540d\u79f0"}],children:(0,K.jsx)(O.Z,{placeholder:"\u8d44\u4ea7\u540d\u79f0"})}),(0,K.jsx)(E.Z.Item,{label:"\u534f\u8bae",name:"protocol",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u63a5\u5165\u534f\u8bae"}],children:(0,K.jsxs)(F.ZP.Group,{onChange:function(e){var n;switch(k(e.target.value),e.target.value){case"ssh":n=22,Q(H.ssh),x.setFieldsValue({accountType:"custom"}),Te("custom");break;case"rdp":n=3389,Q(H.rdp),x.setFieldsValue({accountType:"custom"}),Te("custom");break;case"vnc":n=5900,Q(H.vnc),x.setFieldsValue({accountType:"custom"}),Te("custom");break;case"telnet":n=23,Q(H.telnet),x.setFieldsValue({accountType:"custom"}),Te("custom");break;case"kubernetes":n=6443;break;default:n=65535}x.setFieldsValue({port:n})},children:[(0,K.jsx)(F.ZP,{value:"rdp",children:"RDP"}),(0,K.jsx)(F.ZP,{value:"ssh",children:"SSH"}),(0,K.jsx)(F.ZP,{value:"vnc",children:"VNC"}),(0,K.jsx)(F.ZP,{value:"telnet",children:"Telnet"}),(0,K.jsx)(F.ZP,{value:"kubernetes",children:"Kubernetes"})]})}),(0,K.jsx)(E.Z.Item,{label:"\u4e3b\u673a\u5730\u5740",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u4ea7\u7684\u4e3b\u673a\u540d\u79f0\u548cIP\u5730\u5740"}],children:(0,K.jsxs)(O.Z.Group,{compact:!0,children:[(0,K.jsx)(E.Z.Item,{noStyle:!0,name:"ip",children:(0,K.jsx)(O.Z,{style:{width:"80%"},placeholder:"\u8d44\u4ea7\u7684\u4e3b\u673a\u540d\u79f0\u6216\u8005IP\u5730\u5740"})}),(0,K.jsx)(E.Z.Item,{noStyle:!0,name:"port",children:(0,K.jsx)(P.Z,{style:{width:"20%"},min:1,max:65535,placeholder:"TCP\u7aef\u53e3"})})]})}),"kubernetes"===y?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(E.Z.Item,{name:"namespace",label:"\u547d\u540d\u7a7a\u95f4",children:(0,K.jsx)(O.Z,{type:"text",placeholder:"\u4e3a\u7a7a\u65f6\u9ed8\u8ba4\u4f7f\u7528default\u547d\u540d\u7a7a\u95f4"})}),(0,K.jsx)(E.Z.Item,{name:"pod",label:"pod",rules:[{required:!0,message:"\u8bf7\u8f93\u5165Pod\u540d\u79f0"}],children:(0,K.jsx)(O.Z,{type:"text",placeholder:"Kubernetes Pod\u7684\u540d\u79f0\uff0c\u5176\u4e2d\u5305\u542b\u4e0e\u4e4b\u76f8\u8fde\u7684\u5bb9\u5668\u3002"})}),(0,K.jsx)(E.Z.Item,{name:"container",label:"\u5bb9\u5668",children:(0,K.jsx)(O.Z,{type:"text",placeholder:"\u4e3a\u7a7a\u65f6\u9ed8\u8ba4\u4f7f\u7528\u7b2c\u4e00\u4e2a\u5bb9\u5668"})})]}):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(E.Z.Item,{label:"\u8d26\u6237\u7c7b\u578b",name:"accountType",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u63a5\u8d26\u6237\u7c7b\u578b"}],children:(0,K.jsx)(u.Z,{onChange:Te,children:J.map((function(e){return(0,K.jsx)(B,{value:e.value,children:e.text},e.value)}))})}),"credential"===f?(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(E.Z.Item,{label:"\u6388\u6743\u51ed\u8bc1",name:"credentialId",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6388\u6743\u51ed\u8bc1"}],children:(0,K.jsx)(u.Z,{onChange:function(){return null},children:we.map((function(e){return(0,K.jsx)(B,{value:e.id,children:(0,K.jsx)(d.Z,{placement:"topLeft",title:e.name,children:e.name})},e.id)}))})})}):null,"custom"===f?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("input",{type:"password",hidden:!0,autoComplete:"new-password"}),(0,K.jsx)(E.Z.Item,{label:"\u6388\u6743\u8d26\u6237",name:"username",children:(0,K.jsx)(O.Z,{autoComplete:"off",placeholder:"\u8f93\u5165\u6388\u6743\u8d26\u6237"})}),(0,K.jsx)(E.Z.Item,{label:"\u6388\u6743\u5bc6\u7801",name:"password",children:(0,K.jsx)(O.Z.Password,{autoComplete:"off",placeholder:"\u8f93\u5165\u6388\u6743\u5bc6\u7801"})})]}):null,"private-key"===f?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(E.Z.Item,{label:"\u6388\u6743\u8d26\u6237",name:"username",children:(0,K.jsx)(O.Z,{placeholder:"\u8f93\u5165\u6388\u6743\u8d26\u6237"})}),(0,K.jsx)(E.Z.Item,{label:"\u79c1\u94a5",name:"privateKey",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u79c1\u94a5"}],children:(0,K.jsx)(q,{rows:4})}),(0,K.jsx)(E.Z.Item,{label:"\u79c1\u94a5\u5bc6\u7801",name:"passphrase",children:(0,K.jsx)(q,{rows:1})})]}):null]}),(0,K.jsx)(E.Z.Item,{label:"\u63a5\u5165\u7f51\u5173",name:"accessGatewayId",tooltip:"\u9700\u8981\u4ece\u63a5\u5165\u7f51\u5173\u624d\u80fd\u8bbf\u95ee\u7684\u76ee\u6807\u673a\u5668\u5fc5\u9009",children:(0,K.jsx)(u.Z,{onChange:function(){return null},allowClear:!0,children:me.map((function(e){return(0,K.jsx)(B,{value:e.id,placeholder:"\u9700\u8981\u4ece\u63a5\u5165\u7f51\u5173\u624d\u80fd\u8bbf\u95ee\u7684\u76ee\u6807\u673a\u5668\u5fc5\u9009",children:(0,K.jsx)(d.Z,{placement:"topLeft",title:e.name,children:e.name})},e.id)}))})}),(0,K.jsx)(E.Z.Item,{label:"\u6807\u7b7e",name:"tags",children:(0,K.jsx)(u.Z,{mode:"tags",placeholder:"\u6807\u7b7e\u53ef\u4ee5\u66f4\u52a0\u65b9\u4fbf\u7684\u68c0\u7d22\u8d44\u4ea7",children:ge.map((function(e){if("-"!==e)return(0,K.jsx)(B,{children:e},e)}))})}),(0,K.jsx)(E.Z.Item,{label:"\u5907\u6ce8",name:"description",children:(0,K.jsx)(q,{rows:4,placeholder:"\u5173\u4e8e\u8d44\u4ea7\u7684\u4e00\u4e9b\u4fe1\u606f\u60a8\u53ef\u4ee5\u5199\u5728\u8fd9\u91cc"})})]}),Ne=(0,K.jsx)("div",{className:"advanced",children:(0,K.jsxs)(A.Z,{defaultActiveKey:["VNC\u4e2d\u7ee7","storage","\u6a21\u5f0f\u8bbe\u7f6e","\u663e\u793a\u8bbe\u7f6e","\u63a7\u5236\u7ec8\u7aef\u884c\u4e3a","socks"],ghost:!0,children:["rdp"===y?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u663e\u793a\u8bbe\u7f6e"}),children:[(0,K.jsx)(E.Z.Item,{name:"color-depth",label:"\u8272\u5f69\u6df1\u5ea6",initialValue:"",children:(0,K.jsxs)(u.Z,{onChange:null,children:[(0,K.jsx)(B,{value:"",children:"\u9ed8\u8ba4"}),(0,K.jsx)(B,{value:"16",children:"\u4f4e\u8272\uff0816\u4f4d\uff09"}),(0,K.jsx)(B,{value:"24",children:"\u771f\u5f69\uff0824\u4f4d\uff09"}),(0,K.jsx)(B,{value:"32",children:"\u771f\u5f69\uff0832\u4f4d\uff09"}),(0,K.jsx)(B,{value:"8",children:"256\u8272"})]})}),(0,K.jsx)(E.Z.Item,{name:"force-lossless",label:"\u65e0\u635f\u538b\u7f29",valuePropName:"checked",rules:[{required:!0}],children:(0,K.jsx)(R.Z,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed"})})]},"\u663e\u793a\u8bbe\u7f6e"),(0,K.jsx)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u8ba4\u8bc1"}),children:(0,K.jsx)(E.Z.Item,{name:"domain",label:"\u57df",children:(0,K.jsx)(O.Z,{type:"text",placeholder:"\u8eab\u4efd\u9a8c\u8bc1\u65f6\u4f7f\u7528\u7684\u57df"})})},"\u8ba4\u8bc1"),(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u9884\u8fde\u63a5 PDU (Hyper-V / VMConnect)"}),children:[(0,K.jsx)(E.Z.Item,{name:"preconnection-id",label:"\u9884\u8fde\u63a5ID",children:(0,K.jsx)(O.Z,{type:"text",placeholder:"RDP \u6e90\u7684\u6570\u5b57 ID"})}),(0,K.jsx)(E.Z.Item,{name:"preconnection-blob",label:"\u9884\u8fde\u63a5\u5b57\u7b26",children:(0,K.jsx)(O.Z,{type:"text",placeholder:"\u6807\u8bc6 RDP \u6e90\u7684\u4efb\u610f\u5b57\u7b26\u4e32"})})]},"PDU"),(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"Remote App"}),children:[(0,K.jsx)(E.Z.Item,{name:"remote-app",label:"\u7a0b\u5e8f",tooltip:"\u6307\u5b9a\u5728\u8fdc\u7a0b\u684c\u9762\u4e0a\u542f\u52a8\u7684RemoteApp\u3002\n\u5982\u679c\u60a8\u7684\u8fdc\u7a0b\u684c\u9762\u670d\u52a1\u5668\u652f\u6301\u8be5\u5e94\u7528\u7a0b\u5e8f\uff0c\u5219\u8be5\u5e94\u7528\u7a0b\u5e8f(\u4e14\u4ec5\u8be5\u5e94\u7528\u7a0b\u5e8f)\u5bf9\u7528\u6237\u53ef\u89c1\u3002 Windows\u9700\u8981\u5bf9\u8fdc\u7a0b\u5e94\u7528\u7a0b\u5e8f\u7684\u540d\u79f0\u4f7f\u7528\u7279\u6b8a\u7684\u7b26\u53f7\u3002\n\u8fdc\u7a0b\u5e94\u7528\u7a0b\u5e8f\u7684\u540d\u79f0\u5fc5\u987b\u4ee5\u4e24\u4e2a\u7ad6\u6761\u4f5c\u4e3a\u524d\u7f00\u3002\n\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u5df2\u7ecf\u5728\u60a8\u7684\u670d\u52a1\u5668\u4e0a\u4e3anotepad.exe\u521b\u5efa\u4e86\u4e00\u4e2a\u8fdc\u7a0b\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u5c06\u5176\u547d\u540d\u4e3a\u201cnotepad\u201d\uff0c\u5219\u60a8\u5c06\u8be5\u53c2\u6570\u8bbe\u7f6e\u4e3a:\u201c||notepad\u201d\u3002",children:(0,K.jsx)(O.Z,{type:"text",placeholder:"remote app"})}),(0,K.jsx)(E.Z.Item,{name:"remote-app-dir",label:"\u5de5\u4f5c\u76ee\u5f55",tooltip:"remote app\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u5982\u679c\u672a\u914d\u7f6eremote app\uff0c\u6b64\u53c2\u6570\u65e0\u6548\u3002",children:(0,K.jsx)(O.Z,{type:"text",placeholder:"remote app\u7684\u5de5\u4f5c\u76ee\u5f55"})}),(0,K.jsx)(E.Z.Item,{name:"remote-app-args",label:"\u53c2\u6570",tooltip:"remote app\u7684\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u5982\u679c\u672a\u914d\u7f6eremote app\uff0c\u6b64\u53c2\u6570\u65e0\u6548\u3002",children:(0,K.jsx)(O.Z,{type:"text",placeholder:"remote app\u7684\u547d\u4ee4\u884c\u53c2\u6570"})})]},"remote-app"),(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u6620\u5c04\u7f51\u7edc\u9a71\u52a8\u5668"}),children:[(0,K.jsx)(E.Z.Item,{name:"enable-drive",label:"\u542f\u7528",valuePropName:"checked",children:(0,K.jsx)(R.Z,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe(n),!0===n&&Ce();case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()})}),ie?(0,K.jsx)(E.Z.Item,{name:"drive-path",label:"\u6620\u5c04\u7a7a\u95f4",extra:"\u7528\u4e8e\u6587\u4ef6\u4f20\u8f93\u7684\u6620\u5c04\u7f51\u7edc\u9a71\u52a8\u5668\uff0c\u4e3a\u7a7a\u65f6\u4f7f\u7528\u64cd\u4f5c\u4eba\u7684\u9ed8\u8ba4\u7a7a\u95f4",children:(0,K.jsx)(u.Z,{onChange:null,allowClear:!0,placeholder:"\u4e3a\u7a7a\u65f6\u4f7f\u7528\u64cd\u4f5c\u4eba\u7684\u9ed8\u8ba4\u7a7a\u95f4",children:ae.map((function(e){return(0,K.jsx)(B,{value:e.id,children:e.name})}))})}):void 0]},"storage")]}):void 0,"ssh"===y?(0,K.jsx)(K.Fragment,{children:(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"Socks \u4ee3\u7406"}),children:[(0,K.jsx)(E.Z.Item,{name:"ssh-mode",noStyle:!0,children:(0,K.jsx)(O.Z,{hidden:!0,value:"native"})}),(0,K.jsx)(E.Z.Item,{name:"socks-proxy-enable",label:"\u4f7f\u7528Socks\u4ee3\u7406",valuePropName:"checked",children:(0,K.jsx)(R.Z,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",onChange:function(e,n){pe(e)}})}),he?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(E.Z.Item,{label:"\u4ee3\u7406\u5730\u5740",name:"socks-proxy-host",rules:[{required:!0}],children:(0,K.jsx)(O.Z,{placeholder:"Socks \u4ee3\u7406\u7684\u4e3b\u673a\u5730\u5740"})}),(0,K.jsx)(E.Z.Item,{label:"\u4ee3\u7406\u7aef\u53e3",name:"socks-proxy-port",rules:[{required:!0}],children:(0,K.jsx)(P.Z,{min:1,max:65535,placeholder:"Socks \u4ee3\u7406\u7684\u4e3b\u673a\u7aef\u53e3"})}),(0,K.jsx)("input",{type:"password",hidden:!0,autoComplete:"new-password"}),(0,K.jsx)(E.Z.Item,{label:"\u4ee3\u7406\u8d26\u53f7",name:"socks-proxy-username",children:(0,K.jsx)(O.Z,{autoComplete:"off",placeholder:"\u4ee3\u7406\u8d26\u53f7\uff0c\u6ca1\u6709\u53ef\u4ee5\u4e0d\u586b"})}),(0,K.jsx)(E.Z.Item,{label:"\u4ee3\u7406\u5bc6\u7801",name:"socks-proxy-password",children:(0,K.jsx)(O.Z.Password,{autoComplete:"off",placeholder:"\u4ee3\u7406\u5bc6\u7801\uff0c\u6ca1\u6709\u53ef\u4ee5\u4e0d\u586b"})})]}):void 0]},"socks")}):void 0,"vnc"===y?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u663e\u793a\u8bbe\u7f6e"}),children:[(0,K.jsx)(E.Z.Item,{name:"color-depth",label:"\u8272\u5f69\u6df1\u5ea6",initialValue:"",children:(0,K.jsxs)(u.Z,{onChange:null,children:[(0,K.jsx)(B,{value:"",children:"\u9ed8\u8ba4"}),(0,K.jsx)(B,{value:"16",children:"\u4f4e\u8272\uff0816\u4f4d\uff09"}),(0,K.jsx)(B,{value:"24",children:"\u771f\u5f69\uff0824\u4f4d\uff09"}),(0,K.jsx)(B,{value:"32",children:"\u771f\u5f69\uff0832\u4f4d\uff09"}),(0,K.jsx)(B,{value:"8",children:"256\u8272"})]})}),(0,K.jsx)(E.Z.Item,{name:"cursor",label:"\u5149\u6807",initialValue:"",children:(0,K.jsxs)(u.Z,{onChange:null,children:[(0,K.jsx)(B,{value:"",children:"\u9ed8\u8ba4"}),(0,K.jsx)(B,{value:"local",children:"\u672c\u5730"}),(0,K.jsx)(B,{value:"remote",children:"\u8fdc\u7a0b"})]})})]},"\u663e\u793a\u8bbe\u7f6e"),(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"VNC\u4e2d\u7ee7"}),children:[(0,K.jsx)(E.Z.Item,{label:"\u76ee\u6807\u4e3b\u673a",tooltip:"\u8fde\u63a5\u5230VNC\u4ee3\u7406\uff08\u4f8b\u5982UltraVNC Repeater\uff09\u65f6\u8981\u8bf7\u6c42\u7684\u76ee\u6807\u4e3b\u673a\u3002",name:"dest-host",children:(0,K.jsx)(O.Z,{placeholder:"\u76ee\u6807\u4e3b\u673a"})}),(0,K.jsx)(E.Z.Item,{label:"\u76ee\u6807\u7aef\u53e3",tooltip:"\u8fde\u63a5\u5230VNC\u4ee3\u7406\uff08\u4f8b\u5982UltraVNC Repeater\uff09\u65f6\u8981\u8bf7\u6c42\u7684\u76ee\u6807\u7aef\u53e3\u3002",name:"dest-port",children:(0,K.jsx)(O.Z,{type:"number",min:1,max:65535,placeholder:"\u76ee\u6807\u7aef\u53e3"})})]},"VNC\u4e2d\u7ee7")]}):void 0,"telnet"===y?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u8ba4\u8bc1"}),children:[(0,K.jsx)(E.Z.Item,(0,T.Z)((0,T.Z)({},W),{},{name:"username-regex",label:"\u7528\u6237\u540d\u6b63\u5219\u8868\u8fbe\u5f0f",children:(0,K.jsx)(O.Z,{type:"text",placeholder:""})})),(0,K.jsx)(E.Z.Item,(0,T.Z)((0,T.Z)({},W),{},{name:"password-regex",label:"\u5bc6\u7801\u6b63\u5219\u8868\u8fbe\u5f0f",children:(0,K.jsx)(O.Z,{type:"text",placeholder:""})})),(0,K.jsx)(E.Z.Item,(0,T.Z)((0,T.Z)({},W),{},{name:"login-success-regex",label:"\u767b\u5f55\u6210\u529f\u6b63\u5219\u8868\u8fbe\u5f0f",children:(0,K.jsx)(O.Z,{type:"text",placeholder:""})})),(0,K.jsx)(E.Z.Item,(0,T.Z)((0,T.Z)({},W),{},{name:"login-failure-regex",label:"\u767b\u5f55\u5931\u8d25\u6b63\u5219\u8868\u8fbe\u5f0f",children:(0,K.jsx)(O.Z,{type:"text",placeholder:""})}))]},"\u8ba4\u8bc1"),(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u663e\u793a\u8bbe\u7f6e"}),children:[(0,K.jsx)(E.Z.Item,{name:"color-scheme",label:"\u914d\u8272\u65b9\u6848",initialValue:"",children:(0,K.jsxs)(u.Z,{onChange:null,children:[(0,K.jsx)(B,{value:"",children:"\u9ed8\u8ba4"}),(0,K.jsx)(B,{value:"gray-black",children:"\u9ed1\u5e95\u7070\u5b57"}),(0,K.jsx)(B,{value:"green-black",children:"\u9ed1\u5e95\u7eff\u5b57"}),(0,K.jsx)(B,{value:"white-black",children:"\u9ed1\u5e95\u767d\u5b57"}),(0,K.jsx)(B,{value:"black-white",children:"\u767d\u5e95\u9ed1\u5b57"})]})}),(0,K.jsx)(E.Z.Item,{name:"font-name",label:"\u5b57\u4f53\u540d\u79f0",children:(0,K.jsx)(O.Z,{type:"text",placeholder:"\u4e3a\u7a7a\u65f6\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53"})}),(0,K.jsx)(E.Z.Item,{name:"font-size",label:"\u5b57\u4f53\u5927\u5c0f",children:(0,K.jsx)(O.Z,{type:"number",placeholder:"\u4e3a\u7a7a\u65f6\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53\u5927\u5c0f",min:8,max:96})})]},"\u663e\u793a\u8bbe\u7f6e"),(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u63a7\u5236\u7ec8\u7aef\u884c\u4e3a"}),children:[(0,K.jsx)(E.Z.Item,{name:"backspace",label:"\u9000\u683c\u952e\u6620\u5c04",initialValue:"",children:(0,K.jsxs)(u.Z,{onChange:null,children:[(0,K.jsx)(B,{value:"",children:"\u9ed8\u8ba4"}),(0,K.jsx)(B,{value:"127",children:"\u5220\u9664\u952e(Ctrl-?)"}),(0,K.jsx)(B,{value:"8",children:"\u9000\u683c\u952e(Ctrl-H)"})]})}),(0,K.jsx)(E.Z.Item,{name:"terminal-type",label:"\u7ec8\u7aef\u7c7b\u578b",initialValue:"",children:(0,K.jsxs)(u.Z,{onChange:null,children:[(0,K.jsx)(B,{value:"",children:"\u9ed8\u8ba4"}),(0,K.jsx)(B,{value:"ansi",children:"ansi"}),(0,K.jsx)(B,{value:"linux",children:"linux"}),(0,K.jsx)(B,{value:"vt100",children:"vt100"}),(0,K.jsx)(B,{value:"vt220",children:"vt220"}),(0,K.jsx)(B,{value:"xterm",children:"xterm"}),(0,K.jsx)(B,{value:"xterm-256color",children:"xterm-256color"})]})})]},"\u63a7\u5236\u7ec8\u7aef\u884c\u4e3a")]}):void 0,"kubernetes"===y?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u8ba4\u8bc1"}),children:[(0,K.jsx)(E.Z.Item,{name:"use-ssl",label:"\u4f7f\u7528SSL",valuePropName:"checked",children:(0,K.jsx)(R.Z,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",onChange:function(e,n){ne(e)}})}),ee?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(E.Z.Item,{name:"client-cert",label:"client-cert",children:(0,K.jsx)(O.Z,{type:"text",placeholder:""})}),(0,K.jsx)(E.Z.Item,{name:"client-key",label:"client-key",children:(0,K.jsx)(O.Z,{type:"text",placeholder:""})}),(0,K.jsx)(E.Z.Item,{name:"ca-cert",label:"ca-cert",children:(0,K.jsx)(O.Z,{type:"text",placeholder:""})})]}):void 0,(0,K.jsx)(E.Z.Item,{name:"ignore-cert",label:"\u5ffd\u7565\u8bc1\u4e66",valuePropName:"checked",children:(0,K.jsx)(R.Z,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",onChange:function(e,n){}})})]},"\u8ba4\u8bc1"),(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u663e\u793a\u8bbe\u7f6e"}),children:[(0,K.jsx)(E.Z.Item,{name:"color-scheme",label:"\u914d\u8272\u65b9\u6848",initialValue:"",children:(0,K.jsxs)(u.Z,{onChange:null,children:[(0,K.jsx)(B,{value:"",children:"\u9ed8\u8ba4"}),(0,K.jsx)(B,{value:"gray-black",children:"\u9ed1\u5e95\u7070\u5b57"}),(0,K.jsx)(B,{value:"green-black",children:"\u9ed1\u5e95\u7eff\u5b57"}),(0,K.jsx)(B,{value:"white-black",children:"\u9ed1\u5e95\u767d\u5b57"}),(0,K.jsx)(B,{value:"black-white",children:"\u767d\u5e95\u9ed1\u5b57"})]})}),(0,K.jsx)(E.Z.Item,{name:"font-name",label:"\u5b57\u4f53\u540d\u79f0",children:(0,K.jsx)(O.Z,{type:"text",placeholder:"\u4e3a\u7a7a\u65f6\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53"})}),(0,K.jsx)(E.Z.Item,{name:"font-size",label:"\u5b57\u4f53\u5927\u5c0f",children:(0,K.jsx)(O.Z,{type:"number",placeholder:"\u4e3a\u7a7a\u65f6\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53\u5927\u5c0f",min:8,max:96})})]},"\u663e\u793a\u8bbe\u7f6e"),(0,K.jsxs)(z,{header:(0,K.jsx)(M,{strong:!0,children:"\u63a7\u5236\u7ec8\u7aef\u884c\u4e3a"}),children:[(0,K.jsx)(E.Z.Item,{name:"backspace",label:"\u9000\u683c\u952e\u6620\u5c04",initialValue:"",children:(0,K.jsxs)(u.Z,{onChange:null,children:[(0,K.jsx)(B,{value:"",children:"\u9ed8\u8ba4"}),(0,K.jsx)(B,{value:"127",children:"\u5220\u9664\u952e(Ctrl-?)"}),(0,K.jsx)(B,{value:"8",children:"\u9000\u683c\u952e(Ctrl-H)"})]})}),(0,K.jsx)(E.Z.Item,{name:"terminal-type",label:"\u7ec8\u7aef\u7c7b\u578b",initialValue:"",children:(0,K.jsxs)(u.Z,{onChange:null,children:[(0,K.jsx)(B,{value:"",children:"\u9ed8\u8ba4"}),(0,K.jsx)(B,{value:"ansi",children:"ansi"}),(0,K.jsx)(B,{value:"linux",children:"linux"}),(0,K.jsx)(B,{value:"vt100",children:"vt100"}),(0,K.jsx)(B,{value:"vt220",children:"vt220"}),(0,K.jsx)(B,{value:"xterm",children:"xterm"}),(0,K.jsx)(B,{value:"xterm-256color",children:"xterm-256color"})]})})]},"\u63a7\u5236\u7ec8\u7aef\u884c\u4e3a")]}):void 0]})});return(0,K.jsx)(v.Z,{className:"asset-modal",title:o&&!1===h?"\u66f4\u65b0\u8d44\u4ea7":"\u65b0\u5efa\u8d44\u4ea7",visible:n,maskClosable:!1,destroyOnClose:!0,centered:!0,width:700,onOk:function(){x.validateFields().then(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0===h&&(n.id=void 0),console.log(n.tags,D.Z.isEmpty(n.tags)),D.Z.isEmpty(n.tags)?n.tags="":n.tags=n.tags.join(","),x.resetFields(),e.next=6,t(n);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},onCancel:function(){x.resetFields(),s()},confirmLoading:i,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,K.jsxs)(E.Z,(0,T.Z)((0,T.Z)({form:x},Y),{},{children:[(0,K.jsx)(E.Z.Item,{name:"id",noStyle:!0,children:(0,K.jsx)(O.Z,{hidden:!0})}),(0,K.jsx)(L.Z,{defaultActiveKey:"basic",items:[{label:(0,K.jsxs)("span",{children:[(0,K.jsx)(G.Z,{}),"\u57fa\u7840\u4fe1\u606f"]}),key:"basic",children:Oe},{label:(0,K.jsxs)("span",{children:[(0,K.jsx)(U.Z,{}),"\u9ad8\u7ea7\u914d\u7f6e"]}),key:"advanced",children:Ne}]})]}))})},Q=t(88928),X=t(40056),$=t(87591),ee=t(15253),ne=t(12362),te=t(10658),re=t.n(te),ae=["type","defaultRender"],se=["type","defaultRender"],ce=["type","defaultRender"],le=w.Z,ie=i.Z.Content,oe=l.createRef();var ue=(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("a",{onClick:function(){var e=new Blob(["\ufeffname,ssh,127.0.0.1,22,username,password,privateKey,passphrase,description,tag1|tag2|tag3"],{type:"text/csv;charset=gb2312;"}),n=document.createElement("a");n.download="sample.csv",n.href=URL.createObjectURL(e),n.click()},children:"\u4e0b\u8f7d\u793a\u4f8b"}),(0,K.jsx)("div",{children:"\u5bfc\u5165\u8d44\u4ea7\u65f6\uff0c\u8d26\u53f7\u3001\u5bc6\u7801\u548c\u5bc6\u94a5\u3001\u5bc6\u7801\u5c5e\u4e8e\u4e8c\u9009\u4e00\uff0c\u90fd\u586b\u5199\u65f6\u4f18\u5148\u9009\u62e9\u79c1\u94a5\u548c\u5bc6\u7801\u3002"})]}),de=function(){var e=(0,l.useState)(!1),n=(0,c.Z)(e,2),t=n[0],i=n[1],T=(0,l.useState)(!1),O=(0,c.Z)(T,2),N=O[0],A=O[1],E=(0,l.useState)(void 0),F=(0,c.Z)(E,2),P=F[0],R=F[1],L=(0,l.useState)([]),V=(0,c.Z)(L,2),_=V[0],D=V[1],G=(0,l.useState)([]),U=(0,c.Z)(G,2),q=U[0],B=U[1],M=(0,l.useState)(!1),z=(0,c.Z)(M,2),H=z[0],Y=z[1],W=(0,l.useState)(void 0),te=(0,c.Z)(W,2),de=te[0],he=te[1],pe=(0,l.useState)(!1),xe=(0,c.Z)(pe,2),Ze=xe[0],me=xe[1],fe=(0,Q.T)(Q.Z.ASSET),je=(0,c.Z)(fe,2),ve=je[0],ge=je[1],be=(0,X.useQuery)("getAllTag",I.Z.getAll),ye=(0,g.s0)(),ke=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540d\u79f0",dataIndex:"name",sorter:!0,render:function(e,n){"-"===n.description&&(n.description="");var t=(0,K.jsx)("div",{children:e});return(0,ee.c1)("asset-detail")&&(t=(0,K.jsx)(b.rU,{to:"/asset/".concat(n.id),children:e})),(0,K.jsxs)("div",{children:[t,(0,K.jsx)("div",{style:{color:"rgba(0, 0, 0, 0.45)",lineHeight:1.45,fontSize:"14px"},children:n.description})]})}},{title:"\u534f\u8bae",dataIndex:"protocol",key:"protocol",sorter:!0,render:function(e,n){return(0,K.jsx)(o.Z,{color:C.f[e],children:e})},renderFormItem:function(e,n,t){var r=n.type;n.defaultRender,(0,s.Z)(n,ae);return"form"===r?null:(0,K.jsxs)(u.Z,{children:[(0,K.jsx)(u.Z.Option,{value:"rdp",children:"RDP"}),(0,K.jsx)(u.Z.Option,{value:"ssh",children:"SSH"}),(0,K.jsx)(u.Z.Option,{value:"telnet",children:"Telnet"}),(0,K.jsx)(u.Z.Option,{value:"kubernetes",children:"Kubernetes"})]})}},{title:"\u7f51\u7edc",dataIndex:"network",key:"network",sorter:!0,fieldProps:{placeholder:"\u793a\u4f8b: 127\u3001127.0.0.1\u3001:22\u3001127.0.0.1:22"},render:function(e,n){return"".concat(n.ip+":"+n.port)}},{title:"\u6807\u7b7e",dataIndex:"tags",key:"tags",render:function(e){if(S.Z.hasText(e))return e.split(",").filter((function(e){return"-"!==e})).map((function(e){return(0,K.jsx)(o.Z,{children:e},e)}))},renderFormItem:function(e,n,t){var r,a=n.type;n.defaultRender,(0,s.Z)(n,se);return"form"===a?null:(0,K.jsx)(u.Z,{mode:"multiple",allowClear:!0,children:null===(r=be.data)||void 0===r?void 0:r.map((function(e){if("-"!==e)return(0,K.jsx)(u.Z.Option,{children:e},e)}))})}},{title:"\u72b6\u6001",dataIndex:"active",key:"active",sorter:!0,render:function(e,n){return!0===n.testing?(0,K.jsx)(d.Z,{title:"\u6d4b\u8bd5\u4e2d",children:(0,K.jsx)(h.Z,{status:"processing",text:"\u6d4b\u8bd5\u4e2d"})}):e?(0,K.jsx)(d.Z,{title:"\u8fd0\u884c\u4e2d",children:(0,K.jsx)(h.Z,{status:"success",text:"\u8fd0\u884c\u4e2d"})}):(0,K.jsx)(d.Z,{title:n.activeMessage,children:(0,K.jsx)(h.Z,{status:"error",text:"\u4e0d\u53ef\u7528"})})},renderFormItem:function(e,n,t){var r=n.type;n.defaultRender,(0,s.Z)(n,ce);return"form"===r?null:(0,K.jsxs)(u.Z,{children:[(0,K.jsx)(u.Z.Option,{value:"true",children:"\u8fd0\u884c\u4e2d"}),(0,K.jsx)(u.Z.Option,{value:"false",children:"\u4e0d\u53ef\u7528"})]})}},{title:"\u6240\u6709\u8005",dataIndex:"ownerName",key:"ownerName",hideInSearch:!0},{title:"\u521b\u5efa\u65f6\u95f4",key:"created",sorter:!0,dataIndex:"created",hideInSearch:!0},{title:"\u6700\u540e\u63a5\u5165\u65f6\u95f4",key:"lastAccessTime",sorter:!0,dataIndex:"lastAccessTime",hideInSearch:!0,render:function(e,n){return"0001-01-01 00:00:00"===e?"-":(0,K.jsx)(d.Z,{title:e,children:re()(e).fromNow()})}},{title:"\u64cd\u4f5c",valueType:"option",key:"option",render:function(e,n,t,s){var c=n.id,l=n.protocol,o=n.name,u="";return u="ssh"===l?"#/term?assetId=".concat(c,"&assetName=").concat(o):"#/access?assetId=".concat(c,"&assetName=").concat(o,"&protocol=").concat(l),[(0,K.jsx)($.Z,{menu:"asset-access",children:(0,K.jsx)("a",{href:u,target:"_blank",children:"\u63a5\u5165"},"access")},"asset-access"),(0,K.jsx)($.Z,{menu:"asset-edit",children:(0,K.jsx)("a",{onClick:function(){i(!0),R(n.id)},children:"\u7f16\u8f91"},"edit")},"asset-edit"),(0,K.jsx)($.Z,{menu:"asset-del",children:(0,K.jsx)(p.Z,{title:"\u60a8\u786e\u8ba4\u8981\u5220\u9664\u6b64\u884c\u5417?",onConfirm:(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.deleteById(n.id);case 2:oe.current.reload();case 3:case"end":return e.stop()}}),e)}))),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,K.jsx)("a",{className:"danger",children:"\u5220\u9664"},"delete")},"confirm-delete")},"asset-del"),(0,K.jsx)(y.Z,{onSelect:function(e){switch(e){case"copy":Y(!0),i(!0),R(n.id);break;case"test":we(n.id,t);break;case"change-owner":Se(n);break;case"asset-detail":ye("/asset/".concat(n.id,"?activeKey=info"));break;case"asset-authorised-user":ye("/asset/".concat(n.id,"?activeKey=bind-user"));break;case"asset-authorised-user-group":ye("/asset/".concat(n.id,"?activeKey=bind-user-group"))}},menus:[{key:"copy",name:"\u590d\u5236",disabled:!(0,ee.c1)("asset-copy")},{key:"test",name:"\u8fde\u901a\u6027\u6d4b\u8bd5",disabled:!(0,ee.c1)("asset-conn-test")},{key:"change-owner",name:"\u66f4\u6362\u6240\u6709\u8005",disabled:!(0,ee.c1)("asset-change-owner")},{key:"asset-detail",name:"\u8be6\u60c5",disabled:!(0,ee.c1)("asset-detail")},{key:"asset-authorised-user",name:"\u6388\u6743\u7528\u6237",disabled:!(0,ee.c1)("asset-authorised-user")},{key:"asset-authorised-user-group",name:"\u6388\u6743\u7528\u6237\u7ec4",disabled:!(0,ee.c1)("asset-authorised-user-group")}]},"actionGroup")]}}],we=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,s,l,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _[t].testing=!0,D(_.slice()),e.next=4,w.Z.connTest(n);case 4:a=e.sent,s=(0,c.Z)(a,2),l=s[0],i=s[1],_[t].active=l,_[t].activeMessage=i,_[t].testing=!1,D(_.slice());case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=0;n<_.length;n++)t=_[n],q.includes(t.id)&&we(t.id,n);B([]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,s,l,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.importAsset(n);case 2:if(t=e.sent,a=(0,c.Z)(t,2),s=a[0],l=a[1],!1!==s){e.next=9;break}return x.Z.error({message:"\u5bfc\u5165\u8d44\u4ea7\u5931\u8d25",description:l}),e.abrupt("return",!1);case 9:return i=l.successCount,0===(o=l.errorCount)?x.Z.success({message:"\u5bfc\u5165\u8d44\u4ea7\u6210\u529f",description:"\u5171\u5bfc\u5165\u6210\u529f"+i+"\u6761\u8d44\u4ea7\u3002"}):x.Z.info({message:"\u5bfc\u5165\u8d44\u4ea7\u5b8c\u6210",description:"\u5171\u5bfc\u5165\u6210\u529f".concat(i,"\u6761\u8d44\u4ea7\uff0c\u5931\u8d25").concat(o,"\u6761\u8d44\u4ea7\u3002")}),oe.current.reload(),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Se=function(e){he(e),me(!0)};return(0,K.jsxs)(ie,{className:"page-container",children:[(0,K.jsx)(k.Z,{columns:ke,actionRef:oe,columnsState:{value:ve,onChange:ge},request:(0,a.Z)((0,r.Z)().mark((function e(){var n,t,a,s,c,l,i,o,u,d,h=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},a=h.length>1?h[1]:void 0,h.length>2?h[2]:void 0,s="",c="",Object.keys(a).length>0&&("network"===(s=Object.keys(a)[0])&&(s="ip"),c=Object.values(a)[0]),t.network&&((o=t.network.split(":")).length>=2?(l=o[0],i=o[1]):l=o[0]),u={pageIndex:t.current,pageSize:t.pageSize,name:t.name,type:t.type,protocol:t.protocol,active:t.active,tags:null===(n=t.tags)||void 0===n?void 0:n.join(","),ip:l,port:i,field:s,order:c},e.next=10,le.getPaging(u);case 10:return d=e.sent,D(d.items),e.abrupt("return",{data:_,success:!0,total:d.total});case 13:case"end":return e.stop()}}),e)}))),rowSelection:{selections:[Z.Z.SELECTION_ALL,Z.Z.SELECTION_INVERT],selectedRowKeys:q,onChange:function(e){B(e)}},dataSource:_,rowKey:"id",search:{labelWidth:"auto"},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"\u8d44\u4ea7\u5217\u8868",toolBarRender:function(){return[(0,K.jsx)($.Z,{menu:"asset-add",children:(0,K.jsx)(m.Z,{type:"primary",onClick:function(){i(!0)},children:"\u65b0\u5efa"},"add")}),(0,K.jsx)($.Z,{menu:"asset-import",children:(0,K.jsx)(f.Z,{content:ue,children:(0,K.jsx)(j.Z,{maxCount:1,beforeUpload:Ce,showUploadList:!1,children:(0,K.jsx)(m.Z,{children:"\u5bfc\u5165"},"import")})})}),(0,K.jsx)($.Z,{menu:"asset-del",children:(0,K.jsx)(m.Z,{danger:!0,type:"primary",disabled:0===q.length,onClick:function(){v.Z.confirm({title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684\u884c\u5417?",content:"\u5220\u9664\u4e4b\u540e\u65e0\u6cd5\u8fdb\u884c\u6062\u590d\uff0c\u8bf7\u614e\u91cd\u8003\u8651\u3002",okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.deleteById(q.join(","));case 2:oe.current.reload(),B([]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})},children:"\u5220\u9664"},"delete")}),(0,K.jsx)($.Z,{menu:"asset-conn-test",children:(0,K.jsx)(m.Z,{type:"primary",disabled:0===q.length,onClick:Ie,children:"\u8fde\u901a\u6027\u6d4b\u8bd5"},"connTest")})]}}),(0,K.jsx)(J,{id:P,copied:H,visible:t,confirmLoading:N,handleCancel:function(){i(!1),R(void 0),Y(!1)},handleOk:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(!0),e.prev=1,!n.id){e.next=8;break}return e.next=5,le.updateById(n.id,n);case 5:t=e.sent,e.next=11;break;case 8:return e.next=10,le.create(n);case 10:t=e.sent;case 11:t&&i(!1),oe.current.reload();case 13:return e.prev=13,A(!1),R(void 0),Y(!1),e.finish(13);case 18:case"end":return e.stop()}}),e,null,[[1,,13,18]])})));return function(n){return e.apply(this,arguments)}}()}),(0,K.jsx)(ne.Z,{lastOwner:null===de||void 0===de?void 0:de.owner,open:Ze,handleOk:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.changeOwner(null===de||void 0===de?void 0:de.id,n);case 2:e.sent&&(me(!1),oe.current.reload());case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),handleCancel:function(){me(!1)}})]})}},12362:function(e,n,t){var r=t(74165),a=t(15861),s=t(29439),c=t(47313),l=t(40056),i=t(27777),o=t(96296),u=t(72652),d=t(74294),h=t(46417);n.Z=function(e){var n,t=e.lastOwner,p=e.open,x=e.handleOk,Z=e.handleCancel,m=(0,c.useState)(!1),f=(0,s.Z)(m,2),j=f[0],v=f[1],g=(0,c.useState)(t),b=(0,s.Z)(g,2),y=b[0],k=b[1],w=(0,l.useQuery)("usersQuery",i.Z.getAll,{enabled:p});return(0,h.jsx)("div",{children:(0,h.jsx)(o.Z,{title:"\u66f4\u6362\u6240\u6709\u8005",confirmLoading:j,open:p,onOk:(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,x(y);case 3:v(!1);case 4:case"end":return e.stop()}}),e)}))),onCancel:Z,destroyOnClose:!0,children:(0,h.jsx)(u.Z,{spinning:w.isLoading,children:(0,h.jsx)(d.Z,{defaultValue:t,style:{width:"100%"},onChange:function(e){k(e)},children:null===(n=w.data)||void 0===n?void 0:n.map((function(e){return(0,h.jsx)(d.Z.Option,{value:e.id,children:e.nickname},e.id)}))})})})})}},87591:function(e,n,t){var r=t(93433),a=t(15253);n.Z=function(e){var n=e.menu,t=e.children;if(Array.isArray(n)){if(a.c1.apply(void 0,(0,r.Z)(n)))return t}else if((0,a.c1)(n))return t}},88928:function(e,n,t){t.d(n,{T:function(){return o}});var r=t(29439),a=t(43144),s=t(15671),c=t(99925),l=t(47313),i=new((0,a.Z)((function e(){(0,s.Z)(this,e),this.ASSET="cs-asset",this.CREDENTIAL="cs-credential",this.COMMAND="cs-command",this.ACCESS_GATEWAY="cs-access-gateway",this.ONLINE_SESSION="cs-online-session",this.OFFLINE_SESSION="cs-offline-session",this.LOGIN_LOG="cs-login-log",this.STORAGE_LOG="cs-storage-log",this.JOB="cs-job",this.STORAGE="cs-storage",this.LOGIN_POLICY="cs-login-policy",this.ACCESS_SECURITY="cs-access-security",this.USER="cs-user",this.ROLE="cs-role",this.USER_GROUP="cs-user-group",this.COMMAND_FILTER="cs-command-filter",this.STRATEGY="cs-strategy"})));n.Z=i;var o=function(e){var n=(0,l.useState)(u(e)),t=(0,r.Z)(n,2),a=t[0],s=t[1];return[a,function(n){new Promise((function(e){s(n),e(n)})).then((function(n){d(e,n)}))}]},u=function(e){switch(e){case i.ASSET:case i.CREDENTIAL:case i.COMMAND:case i.ACCESS_GATEWAY:case i.ONLINE_SESSION:case i.OFFLINE_SESSION:}return h(e,{})},d=function(e,n){localStorage.setItem(e,JSON.stringify(n))},h=function(e,n){var t=localStorage.getItem(e);if(!c.Z.hasText(t))return n;try{return JSON.parse(t)}catch(r){return n}}},15378:function(e,n,t){var r=t(43144),a=t(15671),s=new((0,r.Z)((function e(){(0,a.Z)(this,e),this.isEmpty=function(e){return!e||0===e.length}})));n.Z=s},99925:function(e,n,t){var r=t(43144),a=t(15671),s=new((0,r.Z)((function e(){(0,a.Z)(this,e),this.hasText=function(e){return!(void 0===e||null===e||0===e.length)},this.zeroPad=function(e,n){for(var t=e.toString();t.length<n;)t="0"+t;return t}})));n.Z=s}}]);