"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[2994],{72994:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(87462),o=n(1413),u=n(4942),i=n(29439),c=n(44925),a=n(47313),l=n(46123),s=n.n(l),f=n(57290),v=a.forwardRef((function(e,t){var n=e.height,i=e.offset,c=e.children,l=e.prefixCls,v=e.onInnerResize,d=e.innerProps,h={},p={display:"flex",flexDirection:"column"};return void 0!==i&&(h={height:n,position:"relative",overflow:"hidden"},p=(0,o.Z)((0,o.Z)({},p),{},{transform:"translateY(".concat(i,"px)"),position:"absolute",left:0,right:0,top:0})),a.createElement("div",{style:h},a.createElement(f.Z,{onResize:function(e){e.offsetHeight&&v&&v()}},a.createElement("div",(0,r.Z)({style:p,className:s()((0,u.Z)({},"".concat(l,"-holder-inner"),l)),ref:t},d),c)))}));v.displayName="Filler";var d=v,h=n(15671),p=n(43144),m=n(60136),g=n(27277),b=function(e){return+setTimeout(e,16)},M=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(b=function(e){return window.requestAnimationFrame(e)},M=function(e){return window.cancelAnimationFrame(e)});var E=0,R=new Map;function w(e){R.delete(e)}var S=function(e){var t=E+=1;return function n(r){if(0===r)w(t),e();else{var o=b((function(){n(r-1)}));R.set(t,o)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};S.cancel=function(e){var t=R.get(e);return w(t),M(t)};var y=S;function T(e){return"touches"in e?e.touches[0].pageY:e.pageY}var Z=function(e){(0,m.Z)(n,e);var t=(0,g.Z)(n);function n(){var e;(0,h.Z)(this,n);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).moveRaf=null,e.scrollbarRef=a.createRef(),e.thumbRef=a.createRef(),e.visibleTimeout=null,e.state={dragging:!1,pageY:null,startTop:null,visible:!1},e.delayHidden=function(){clearTimeout(e.visibleTimeout),e.setState({visible:!0}),e.visibleTimeout=setTimeout((function(){e.setState({visible:!1})}),2e3)},e.onScrollbarTouchStart=function(e){e.preventDefault()},e.onContainerMouseDown=function(e){e.stopPropagation(),e.preventDefault()},e.patchEvents=function(){window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("mouseup",e.onMouseUp),e.thumbRef.current.addEventListener("touchmove",e.onMouseMove),e.thumbRef.current.addEventListener("touchend",e.onMouseUp)},e.removeEvents=function(){var t;window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("mouseup",e.onMouseUp),null===(t=e.scrollbarRef.current)||void 0===t||t.removeEventListener("touchstart",e.onScrollbarTouchStart),e.thumbRef.current&&(e.thumbRef.current.removeEventListener("touchstart",e.onMouseDown),e.thumbRef.current.removeEventListener("touchmove",e.onMouseMove),e.thumbRef.current.removeEventListener("touchend",e.onMouseUp)),y.cancel(e.moveRaf)},e.onMouseDown=function(t){var n=e.props.onStartMove;e.setState({dragging:!0,pageY:T(t),startTop:e.getTop()}),n(),e.patchEvents(),t.stopPropagation(),t.preventDefault()},e.onMouseMove=function(t){var n=e.state,r=n.dragging,o=n.pageY,u=n.startTop,i=e.props.onScroll;if(y.cancel(e.moveRaf),r){var c=u+(T(t)-o),a=e.getEnableScrollRange(),l=e.getEnableHeightRange(),s=l?c/l:0,f=Math.ceil(s*a);e.moveRaf=y((function(){i(f)}))}},e.onMouseUp=function(){var t=e.props.onStopMove;e.setState({dragging:!1}),t(),e.removeEvents()},e.getSpinHeight=function(){var t=e.props,n=t.height,r=n/t.count*10;return r=Math.max(r,20),r=Math.min(r,n/2),Math.floor(r)},e.getEnableScrollRange=function(){var t=e.props;return t.scrollHeight-t.height||0},e.getEnableHeightRange=function(){return e.props.height-e.getSpinHeight()||0},e.getTop=function(){var t=e.props.scrollTop,n=e.getEnableScrollRange(),r=e.getEnableHeightRange();return 0===t||0===n?0:t/n*r},e.showScroll=function(){var t=e.props,n=t.height;return t.scrollHeight>n},e}return(0,p.Z)(n,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(e){e.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var e=this.state,t=e.dragging,n=e.visible,r=this.props,i=r.prefixCls,c=r.direction,l=this.getSpinHeight(),f=this.getTop(),v=this.showScroll(),d=v&&n,h="rtl"===c?{left:0}:{right:0};return a.createElement("div",{ref:this.scrollbarRef,className:s()("".concat(i,"-scrollbar"),(0,u.Z)({},"".concat(i,"-scrollbar-show"),v)),style:(0,o.Z)((0,o.Z)({width:8,top:0,bottom:0},h),{},{position:"absolute",display:d?null:"none"}),onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},a.createElement("div",{ref:this.thumbRef,className:s()("".concat(i,"-scrollbar-thumb"),(0,u.Z)({},"".concat(i,"-scrollbar-thumb-moving"),t)),style:{width:"100%",height:l,top:f,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),n}(a.Component);function H(e){var t=e.children,n=e.setRef,r=a.useCallback((function(e){n(e)}),[]);return a.cloneElement(t,{ref:r})}var L=n(1168);function x(e){return function(e){return e instanceof HTMLElement||e instanceof SVGElement}(e)?e:e instanceof a.Component?L.findDOMNode(e):null}var D=function(){function e(){(0,h.Z)(this,e),this.maps=void 0,this.maps=Object.create(null)}return(0,p.Z)(e,[{key:"set",value:function(e,t){this.maps[e]=t}},{key:"get",value:function(e){return this.maps[e]}}]),e}();var k=n(71002);function C(e,t,n){var r=a.useState(e),o=(0,i.Z)(r,2),u=o[0],c=o[1],l=a.useState(null),s=(0,i.Z)(l,2),f=s[0],v=s[1];return a.useEffect((function(){var r=function(e,t,n){var r,o,u=e.length,i=t.length;if(0===u&&0===i)return null;u<i?(r=e,o=t):(r=t,o=e);var c={__EMPTY_ITEM__:!0};function a(e){return void 0!==e?n(e):c}for(var l=null,s=1!==Math.abs(u-i),f=0;f<o.length;f+=1){var v=a(r[f]);if(v!==a(o[f])){l=f,s=s||v!==a(o[f+1]);break}}return null===l?null:{index:l,multiple:s}}(u||[],e||[],t);void 0!==(null===r||void 0===r?void 0:r.index)&&(null===n||void 0===n||n(r.index),v(e[r.index])),c(e)}),[e]),[f]}var N="object"===("undefined"===typeof navigator?"undefined":(0,k.Z)(navigator))&&/Firefox/i.test(navigator.userAgent),Y=function(e,t){var n=(0,a.useRef)(!1),r=(0,a.useRef)(null);var o=(0,a.useRef)({top:e,bottom:t});return o.current.top=e,o.current.bottom=t,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=e<0&&o.current.top||e>0&&o.current.bottom;return t&&u?(clearTimeout(r.current),n.current=!1):u&&!n.current||(clearTimeout(r.current),n.current=!0,r.current=setTimeout((function(){n.current=!1}),50)),!n.current&&u}};var P="undefined"!==typeof window&&window.document&&window.document.createElement?a.useLayoutEffect:a.useEffect,I=function(e,t){var n=a.useRef(!0);P((function(){return e(n.current)}),t),P((function(){return n.current=!1,function(){n.current=!0}}),[])},U=I,_=14/15;var A=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","component","onScroll","onVisibleChange","innerProps"],z=[],F={overflowY:"auto",overflowAnchor:"none"};function K(e,t){var n=e.prefixCls,l=void 0===n?"rc-virtual-list":n,f=e.className,v=e.height,h=e.itemHeight,p=e.fullHeight,m=void 0===p||p,g=e.style,b=e.data,M=e.children,E=e.itemKey,R=e.virtual,w=e.direction,S=e.component,T=void 0===S?"div":S,L=e.onScroll,P=e.onVisibleChange,I=e.innerProps,K=(0,c.Z)(e,A),O=!(!1===R||!v||!h),j=O&&b&&h*b.length>v,V=(0,a.useState)(0),q=(0,i.Z)(V,2),G=q[0],W=q[1],B=(0,a.useState)(!1),J=(0,i.Z)(B,2),Q=J[0],X=J[1],$=s()(l,(0,u.Z)({},"".concat(l,"-rtl"),"rtl"===w),f),ee=b||z,te=(0,a.useRef)(),ne=(0,a.useRef)(),re=(0,a.useRef)(),oe=a.useCallback((function(e){return"function"===typeof E?E(e):null===e||void 0===e?void 0:e[E]}),[E]),ue={getKey:oe};function ie(e){W((function(t){var n=function(e){var t=e;Number.isNaN(Se.current)||(t=Math.min(t,Se.current));return t=Math.max(t,0),t}("function"===typeof e?e(t):e);return te.current.scrollTop=n,n}))}var ce=(0,a.useRef)({start:0,end:ee.length}),ae=(0,a.useRef)(),le=C(ee,oe),se=(0,i.Z)(le,1)[0];ae.current=se;var fe=function(e,t,n){var r=a.useState(0),o=(0,i.Z)(r,2),u=o[0],c=o[1],l=(0,a.useRef)(new Map),s=(0,a.useRef)(new D),f=(0,a.useRef)();function v(){y.cancel(f.current)}function d(){v(),f.current=y((function(){l.current.forEach((function(e,t){if(e&&e.offsetParent){var n=x(e),r=n.offsetHeight;s.current.get(t)!==r&&s.current.set(t,n.offsetHeight)}})),c((function(e){return e+1}))}))}return(0,a.useEffect)((function(){return v}),[]),[function(r,o){var u=e(r),i=l.current.get(u);o?(l.current.set(u,o),d()):l.current.delete(u),!i!==!o&&(o?null===t||void 0===t||t(r):null===n||void 0===n||n(r))},d,s.current,u]}(oe,null,null),ve=(0,i.Z)(fe,4),de=ve[0],he=ve[1],pe=ve[2],me=ve[3],ge=a.useMemo((function(){if(!O)return{scrollHeight:void 0,start:0,end:ee.length-1,offset:void 0};var e;if(!j)return{scrollHeight:(null===(e=ne.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:ee.length-1,offset:void 0};for(var t,n,r,o=0,u=ee.length,i=0;i<u;i+=1){var c=ee[i],a=oe(c),l=pe.get(a),s=o+(void 0===l?h:l);s>=G&&void 0===t&&(t=i,n=o),s>G+v&&void 0===r&&(r=i),o=s}return void 0===t&&(t=0,n=0,r=Math.ceil(v/h)),void 0===r&&(r=ee.length-1),{scrollHeight:o,start:t,end:r=Math.min(r+1,ee.length),offset:n}}),[j,O,G,ee,me,v]),be=ge.scrollHeight,Me=ge.start,Ee=ge.end,Re=ge.offset;ce.current.start=Me,ce.current.end=Ee;var we=be-v,Se=(0,a.useRef)(we);Se.current=we;var ye=G<=0,Te=G>=we,Ze=Y(ye,Te);var He=function(e,t,n,r){var o=(0,a.useRef)(0),u=(0,a.useRef)(null),i=(0,a.useRef)(null),c=(0,a.useRef)(!1),l=Y(t,n);return[function(t){if(e){y.cancel(u.current);var n=t.deltaY;o.current+=n,i.current=n,l(n)||(N||t.preventDefault(),u.current=y((function(){var e=c.current?10:1;r(o.current*e),o.current=0})))}},function(t){e&&(c.current=t.detail===i.current)}]}(O,ye,Te,(function(e){ie((function(t){return t+e}))})),Le=(0,i.Z)(He,2),xe=Le[0],De=Le[1];!function(e,t,n){var r,o=(0,a.useRef)(!1),u=(0,a.useRef)(0),i=(0,a.useRef)(null),c=(0,a.useRef)(null),l=function(e){if(o.current){var t=Math.ceil(e.touches[0].pageY),r=u.current-t;u.current=t,n(r)&&e.preventDefault(),clearInterval(c.current),c.current=setInterval((function(){(!n(r*=_,!0)||Math.abs(r)<=.1)&&clearInterval(c.current)}),16)}},s=function(){o.current=!1,r()},f=function(e){r(),1!==e.touches.length||o.current||(o.current=!0,u.current=Math.ceil(e.touches[0].pageY),i.current=e.target,i.current.addEventListener("touchmove",l),i.current.addEventListener("touchend",s))};r=function(){i.current&&(i.current.removeEventListener("touchmove",l),i.current.removeEventListener("touchend",s))},U((function(){return e&&t.current.addEventListener("touchstart",f),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",f),r(),clearInterval(c.current)}}),[e])}(O,te,(function(e,t){return!Ze(e,t)&&(xe({preventDefault:function(){},deltaY:e}),!0)})),U((function(){function e(e){O&&e.preventDefault()}return te.current.addEventListener("wheel",xe),te.current.addEventListener("DOMMouseScroll",De),te.current.addEventListener("MozMousePixelScroll",e),function(){te.current&&(te.current.removeEventListener("wheel",xe),te.current.removeEventListener("DOMMouseScroll",De),te.current.removeEventListener("MozMousePixelScroll",e))}}),[O]);var ke=function(e,t,n,r,o,u,i,c){var l=a.useRef();return function(a){if(null!==a&&void 0!==a){if(y.cancel(l.current),"number"===typeof a)i(a);else if(a&&"object"===(0,k.Z)(a)){var s,f=a.align;s="index"in a?a.index:t.findIndex((function(e){return o(e)===a.key}));var v=a.offset,d=void 0===v?0:v;!function c(a,v){if(!(a<0)&&e.current){var h=e.current.clientHeight,p=!1,m=v;if(h){for(var g=v||f,b=0,M=0,E=0,R=Math.min(t.length,s),w=0;w<=R;w+=1){var S=o(t[w]);M=b;var T=n.get(S);b=E=M+(void 0===T?r:T),w===s&&void 0===T&&(p=!0)}var Z=null;switch(g){case"top":Z=M-d;break;case"bottom":Z=E-h+d;break;default:var H=e.current.scrollTop;M<H?m="top":E>H+h&&(m="bottom")}null!==Z&&Z!==e.current.scrollTop&&i(Z)}l.current=y((function(){p&&u(),c(a-1,m)}),2)}}(3)}}else c()}}(te,ee,pe,h,oe,he,ie,(function(){var e;null===(e=re.current)||void 0===e||e.delayHidden()}));a.useImperativeHandle(t,(function(){return{scrollTo:ke}})),U((function(){if(P){var e=ee.slice(Me,Ee+1);P(e,ee)}}),[Me,Ee,ee]);var Ce=function(e,t,n,r,o,u){var i=u.getKey;return e.slice(t,n+1).map((function(e,n){var u=o(e,t+n,{}),c=i(e);return a.createElement(H,{key:c,setRef:function(t){return r(e,t)}},u)}))}(ee,Me,Ee,de,M,ue),Ne=null;return v&&(Ne=(0,o.Z)((0,u.Z)({},m?"height":"maxHeight",v),F),O&&(Ne.overflowY="hidden",Q&&(Ne.pointerEvents="none"))),a.createElement("div",(0,r.Z)({style:(0,o.Z)((0,o.Z)({},g),{},{position:"relative"}),className:$},K),a.createElement(T,{className:"".concat(l,"-holder"),style:Ne,ref:te,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==G&&ie(t),null===L||void 0===L||L(e)}},a.createElement(d,{prefixCls:l,height:be,offset:Re,onInnerResize:he,ref:ne,innerProps:I},Ce)),O&&a.createElement(Z,{ref:re,prefixCls:l,scrollTop:G,height:v,scrollHeight:be,count:ee.length,direction:w,onScroll:function(e){ie(e)},onStartMove:function(){X(!0)},onStopMove:function(){X(!1)}}))}var O=a.forwardRef(K);O.displayName="List";var j=O}}]);