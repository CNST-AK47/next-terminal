"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[6806],{58374:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(74165),a=n(15861),c=n(43144),o=n(15671),i=n(96675),u=n(74776),s=n.n(u),l=(0,c.Z)((function e(t){var n=this;(0,o.Z)(this,e),this.group="",this.getById=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("/".concat(n.group,"/").concat(t));case 2:if(1===(a=e.sent).code){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPaging=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s().stringify(t),e.next=3,i.Z.get("/".concat(n.group,"/paging?").concat(a));case 3:if(1===(c=e.sent).code){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAll=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("/".concat(n.group));case 2:if(1===(t=e.sent).code){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)}))),this.create=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("/".concat(n.group),t);case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateById=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,a){var c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.put("/".concat(n.group,"/").concat(t),a);case 2:return c=e.sent,e.abrupt("return",1===c.code);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.deleteById=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.delete("/".concat(n.group,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.group=t}))},37216:function(e,t,n){var r=n(74165),a=n(15861),c=n(43144),o=n(15671),i=n(60136),u=n(27277),s=n(96675),l=n(74776),d=n.n(l),p=function(e){(0,i.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this,"login-policies")).Bind=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.post("/".concat(e.group,"/").concat(n,"/bind"),a);case 2:return c=t.sent,t.abrupt("return",1===c.code);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.Unbind=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.post("/".concat(e.group,"/").concat(n,"/unbind"),a);case 2:return c=t.sent,t.abrupt("return",1===c.code);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.GetUserPagingByForbiddenCommandId=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){var c,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=d().stringify(a),t.next=3,s.Z.get("/".concat(e.group,"/").concat(n,"/users/paging?").concat(c));case 3:if(1===(o=t.sent).code){t.next=6;break}return t.abrupt("return",{});case 6:return t.abrupt("return",o.data);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.GetUserIdByLoginPolicyId=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.get("/".concat(e.group,"/").concat(n,"/users/id"));case 2:if(1===(a=t.sent).code){t.next=5;break}return t.abrupt("return",[]);case 5:return t.abrupt("return",a.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,c.Z)(n)}(n(58374).Z),f=new p;t.Z=f},27777:function(e,t,n){var r=n(74165),a=n(15861),c=n(43144),o=n(15671),i=n(60136),u=n(27277),s=n(58374),l=n(96675),d=function(e){(0,i.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this,"users")).resetTotp=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.post("/".concat(e.group,"/").concat(n,"/reset-totp"));case 2:return a=t.sent,t.abrupt("return",1===a.code);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changePassword=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){var c,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(c=new FormData).set("password",a),t.next=4,l.Z.post("/".concat(e.group,"/").concat(n,"/change-password"),c);case 4:return o=t.sent,t.abrupt("return",1===o.code);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.changeStatus=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.patch("/".concat(e.group,"/").concat(n,"/status?status=").concat(a));case 2:return c=t.sent,t.abrupt("return",1!==c.code);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return(0,c.Z)(n)}(s.Z),p=new d;t.Z=p},26806:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var r=n(29439),a=n(47313),c=n(94098),o=n(58467),i=n(2135),u=n(74165),s=n(15861),l=n(83371),d=n(80323),p=n(96216),f=n(37216),v=n(46417),Z=function(e){var t,n=e.active,c=e.id,o=(0,a.useState)({}),i=(0,r.Z)(o,2),Z=i[0],m=i[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getById(t);case 2:(n=e.sent)&&m(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n&&c&&e(c)}),[n]),(0,v.jsx)("div",{className:"page-detail-info",children:(0,v.jsxs)(l.Z,{column:1,children:[(0,v.jsx)(l.Z.Item,{label:"\u540d\u79f0",children:Z.name}),(0,v.jsx)(l.Z.Item,{label:"\u4f18\u5148\u7ea7",children:Z.priority}),(0,v.jsx)(l.Z.Item,{label:"IP\u5730\u5740",children:Z.ipGroup}),(0,v.jsx)(l.Z.Item,{label:"\u65f6\u6bb5",children:null===(t=Z.timePeriod)||void 0===t?void 0:t.map((function(e){if((0,p.bZ)(e.value))return(0,v.jsxs)(v.Fragment,{children:["".concat((0,d.E)(e.key)," \uff1a").concat(e.value),(0,v.jsx)("br",{})]})}))}),(0,v.jsx)(l.Z.Item,{label:"\u89c4\u5219",children:"allow"===Z.rule?"\u5141\u8bb8":"\u62d2\u7edd"}),(0,v.jsx)(l.Z.Item,{label:"\u6fc0\u6d3b",children:Z.enabled?"\u2705":"\u274c"})]})})},m=n(59491),h=n(98430),x=n(53469),b=n(27777),y=a.createRef(),g=function(e){var t=e.visible,n=e.loginPolicyId,c=(0,a.useState)([]),o=(0,r.Z)(c,2),i=o[0],l=o[1];(0,a.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.GetUserIdByLoginPolicyId(n);case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var d=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.Bind(n,[{userId:t}]);case 2:i.push(t),l(i),y.current.reload();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u767b\u5f55\u8d26\u53f7",dataIndex:"username",copyable:!0},{title:"\u6635\u79f0",dataIndex:"nickname",copyable:!0},{title:"\u90ae\u7bb1",key:"mail",dataIndex:"mail"},{title:"\u521b\u5efa\u65f6\u95f4",key:"created",dataIndex:"created",hideInSearch:!0},{title:"\u64cd\u4f5c",valueType:"option",key:"option",render:function(e,t,n,r){return[(0,v.jsx)("a",{onClick:function(){d(t.id)},disabled:i.includes(t.id),children:"\u7ed1\u5b9a"},"unbind")]}}];return(0,v.jsx)("div",{children:(0,v.jsx)(x.Z,{columns:p,actionRef:y,request:(0,s.Z)((0,u.Z)().mark((function e(){var t,n,r,a,c,o,i=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1?i[1]:void 0,i.length>2?i[2]:void 0,r="",a="",Object.keys(n).length>0&&(r=Object.keys(n)[0],a=Object.values(n)[0]),c={pageIndex:t.current,pageSize:t.pageSize,name:t.name,field:r,order:a},e.next=9,b.Z.getPaging(c);case 9:return o=e.sent,e.abrupt("return",{data:o.items,success:!0,total:o.total});case 11:case"end":return e.stop()}}),e)}))),rowKey:"id",search:{labelWidth:"auto"},pagination:{defaultPageSize:10},dateFormatter:"string",headerTitle:"\u7528\u6237\u5217\u8868"})})},w=n(87591),k=a.createRef(),I=function(e){e.active;var t=e.loginPolicyId,n=(0,a.useState)(!1),c=(0,r.Z)(n,2),o=c[0],i=c[1],l=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(n){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.Unbind(t,[{userId:n}]);case 2:k.current.reload();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u767b\u5f55\u8d26\u53f7",dataIndex:"username",copyable:!0},{title:"\u6635\u79f0",dataIndex:"nickname",copyable:!0},{title:"\u90ae\u7bb1",key:"mail",dataIndex:"mail"},{title:"\u521b\u5efa\u65f6\u95f4",key:"created",dataIndex:"created",hideInSearch:!0},{title:"\u64cd\u4f5c",valueType:"option",key:"option",render:function(e,t,n,r){return[(0,v.jsx)(w.Z,{menu:"login-policy-unbind-user",children:(0,v.jsx)("a",{onClick:function(){l(t.id)},children:"\u89e3\u7ed1"},"unbind")})]}}];return(0,v.jsxs)("div",{children:[(0,v.jsx)(x.Z,{columns:d,actionRef:k,request:(0,s.Z)((0,u.Z)().mark((function e(){var n,r,a,c,o,i,s=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:{},r=s.length>1?s[1]:void 0,s.length>2?s[2]:void 0,a="",c="",Object.keys(r).length>0&&(a=Object.keys(r)[0],c=Object.values(r)[0]),o={pageIndex:n.current,pageSize:n.pageSize,name:n.name,field:a,order:c},e.next=9,f.Z.GetUserPagingByForbiddenCommandId(t,o);case 9:return i=e.sent,e.abrupt("return",{data:i.items,success:!0,total:i.total});case 11:case"end":return e.stop()}}),e)}))),rowKey:"id",search:{labelWidth:"auto"},pagination:{defaultPageSize:10},dateFormatter:"string",headerTitle:"\u7ed1\u5b9a\u7528\u6237\u5217\u8868",toolBarRender:function(){return[(0,v.jsx)(w.Z,{menu:"login-policy-bind-user",children:(0,v.jsx)(m.Z,{type:"primary",onClick:function(){i(!0)},children:"\u7ed1\u5b9a"},"button")})]}}),(0,v.jsx)(h.Z,{title:"\u7ed1\u5b9a\u7528\u6237",placement:"right",width:.7*window.innerWidth,onClose:function(){i(!1),k.current.reload()},visible:o,children:(0,v.jsx)(g,{visible:o,loginPolicyId:t})})]})},j=c.Z.TabPane,E=function(){var e=(0,o.UO)().loginPolicyId,t=(0,i.lr)(),n=(0,r.Z)(t,2),u=n[0],s=n[1],l=u.get("activeKey");l=l||"info";var d=(0,a.useState)(l),p=(0,r.Z)(d,2),f=p[0],m=p[1];return(0,v.jsx)("div",{className:"page-detail-warp",children:(0,v.jsxs)(c.Z,{activeKey:f,onChange:function(e){m(e),s({activeKey:e})},children:[(0,v.jsx)(j,{tab:"\u57fa\u672c\u4fe1\u606f",children:(0,v.jsx)(Z,{active:"info"===f,id:e})},"info"),(0,v.jsx)(j,{tab:"\u7ed1\u5b9a\u7528\u6237",children:(0,v.jsx)(I,{active:"bind-user"===f,loginPolicyId:e})},"bind-user"),(0,v.jsx)(j,{tab:"\u7ed1\u5b9a\u7528\u6237\u7ec4",children:"\u6682\u672a\u5b9e\u73b0"},"bind-user-group")]})})}},87591:function(e,t,n){var r=n(93433),a=n(15253);t.Z=function(e){var t=e.menu,n=e.children;if(Array.isArray(t)){if(a.c1.apply(void 0,(0,r.Z)(t)))return n}else if((0,a.c1)(t))return n}},80323:function(e,t,n){n.d(t,{E:function(){return a}});var r={1:"\u4e00",2:"\u4e8c",3:"\u4e09",4:"\u56db",5:"\u4e94",6:"\u516d",0:"\u65e5"},a=function(e){return"\u661f\u671f"+r[e]}},83371:function(e,t,n){n.d(t,{K:function(){return b},Z:function(){return k}});var r=n(4942),a=n(29439),c=n(71002),o=n(46123),i=n.n(o),u=n(98138),s=n(47313),l=n(74714),d=n(48138),p=n(82324),f=function(e){return e.children},v=n(87462);function Z(e){return void 0!==e&&null!==e}var m=function(e){var t,n=e.itemPrefixCls,a=e.component,c=e.span,o=e.className,u=e.style,l=e.labelStyle,d=e.contentStyle,p=e.bordered,f=e.label,v=e.content,m=e.colon,h=a;return p?s.createElement(h,{className:i()((t={},(0,r.Z)(t,"".concat(n,"-item-label"),Z(f)),(0,r.Z)(t,"".concat(n,"-item-content"),Z(v)),t),o),style:u,colSpan:c},Z(f)&&s.createElement("span",{style:l},f),Z(v)&&s.createElement("span",{style:d},v)):s.createElement(h,{className:i()("".concat(n,"-item"),o),style:u,colSpan:c},s.createElement("div",{className:"".concat(n,"-item-container")},(f||0===f)&&s.createElement("span",{className:i()("".concat(n,"-item-label"),(0,r.Z)({},"".concat(n,"-item-no-colon"),!m)),style:l},f),(v||0===v)&&s.createElement("span",{className:i()("".concat(n,"-item-content")),style:d},v)))};function h(e,t,n){var r=t.colon,a=t.prefixCls,c=t.bordered,o=n.component,i=n.type,u=n.showLabel,l=n.showContent,d=n.labelStyle,p=n.contentStyle;return e.map((function(e,t){var n=e.props,f=n.label,Z=n.children,h=n.prefixCls,x=void 0===h?a:h,b=n.className,y=n.style,g=n.labelStyle,w=n.contentStyle,k=n.span,I=void 0===k?1:k,j=e.key;return"string"===typeof o?s.createElement(m,{key:"".concat(i,"-").concat(j||t),className:b,style:y,labelStyle:(0,v.Z)((0,v.Z)({},d),g),contentStyle:(0,v.Z)((0,v.Z)({},p),w),span:I,colon:r,component:o,itemPrefixCls:x,bordered:c,label:u?f:null,content:l?Z:null}):[s.createElement(m,{key:"label-".concat(j||t),className:b,style:(0,v.Z)((0,v.Z)((0,v.Z)({},d),y),g),span:1,colon:r,component:o[0],itemPrefixCls:x,bordered:c,label:f}),s.createElement(m,{key:"content-".concat(j||t),className:b,style:(0,v.Z)((0,v.Z)((0,v.Z)({},p),y),w),span:2*I-1,component:o[1],itemPrefixCls:x,bordered:c,content:Z})]}))}var x=function(e){var t=s.useContext(b),n=e.prefixCls,r=e.vertical,a=e.row,c=e.index,o=e.bordered;return r?s.createElement(s.Fragment,null,s.createElement("tr",{key:"label-".concat(c),className:"".concat(n,"-row")},h(a,e,(0,v.Z)({component:"th",type:"label",showLabel:!0},t))),s.createElement("tr",{key:"content-".concat(c),className:"".concat(n,"-row")},h(a,e,(0,v.Z)({component:"td",type:"content",showContent:!0},t)))):s.createElement("tr",{key:c,className:"".concat(n,"-row")},h(a,e,(0,v.Z)({component:o?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},b=s.createContext({}),y={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function g(e,t,n){var r=e;return(void 0===t||t>n)&&(r=(0,d.Tm)(e,{span:n})),r}function w(e){var t,n=e.prefixCls,o=e.title,d=e.extra,f=e.column,v=void 0===f?y:f,Z=e.colon,m=void 0===Z||Z,h=e.bordered,w=e.layout,k=e.children,I=e.className,j=e.style,E=e.size,S=e.labelStyle,C=e.contentStyle,P=s.useContext(l.E_),N=P.getPrefixCls,B=P.direction,T=N("descriptions",n),z=s.useState({}),F=(0,a.Z)(z,2),O=F[0],U=F[1],K=function(e,t){if("number"===typeof e)return e;if("object"===(0,c.Z)(e))for(var n=0;n<p.c4.length;n++){var r=p.c4[n];if(t[r]&&void 0!==e[r])return e[r]||y[r]}return 3}(v,O);s.useEffect((function(){var e=p.ZP.subscribe((function(e){"object"===(0,c.Z)(v)&&U(e)}));return function(){p.ZP.unsubscribe(e)}}),[]);var G=function(e,t){var n=(0,u.Z)(e).filter((function(e){return e})),r=[],a=[],c=t;return n.forEach((function(e,o){var i,u=null===(i=e.props)||void 0===i?void 0:i.span,s=u||1;if(o===n.length-1)return a.push(g(e,u,c)),void r.push(a);s<c?(c-=s,a.push(e)):(a.push(g(e,s,c)),r.push(a),c=t,a=[])})),r}(k,K),L=s.useMemo((function(){return{labelStyle:S,contentStyle:C}}),[S,C]);return s.createElement(b.Provider,{value:L},s.createElement("div",{className:i()(T,(t={},(0,r.Z)(t,"".concat(T,"-").concat(E),E&&"default"!==E),(0,r.Z)(t,"".concat(T,"-bordered"),!!h),(0,r.Z)(t,"".concat(T,"-rtl"),"rtl"===B),t),I),style:j},(o||d)&&s.createElement("div",{className:"".concat(T,"-header")},o&&s.createElement("div",{className:"".concat(T,"-title")},o),d&&s.createElement("div",{className:"".concat(T,"-extra")},d)),s.createElement("div",{className:"".concat(T,"-view")},s.createElement("table",null,s.createElement("tbody",null,G.map((function(e,t){return s.createElement(x,{key:t,index:t,colon:m,prefixCls:T,vertical:"vertical"===w,bordered:h,row:e})})))))))}w.Item=f;var k=w}}]);