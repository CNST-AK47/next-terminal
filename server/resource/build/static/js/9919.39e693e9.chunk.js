"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[9919],{99919:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var r=a(1413),i=a(47313),n=a(45705),l=a(57325),o=a(22121),d=a(95436),s=a(96543),c=a(89755),u=a(91372),m=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(a[r[i]]=e[r[i]])}return a},h=(0,i.forwardRef)((function(e,t){var a=e.chartRef,r=e.style,n=void 0===r?{height:"inherit"}:r,l=e.className,h=e.loading,p=e.loadingTemplate,f=e.errorTemplate,v=m(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),x=(0,d.Z)(o.Kj,v),y=x.chart,g=x.container;return(0,i.useEffect)((function(){(0,s.J)(a,y.current)}),[y.current]),(0,i.useImperativeHandle)(t,(function(){return{getChart:function(){return y.current}}})),i.createElement(c.Z,{errorTemplate:f},h&&i.createElement(u.Z,{loadingTemplate:p,theme:e.theme}),i.createElement("div",{className:l,style:n,ref:g}))})),p=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(a[r[i]]=e[r[i]])}return a},f=(0,i.forwardRef)((function(e,t){var a=e.chartRef,r=e.style,n=void 0===r?{height:"inherit"}:r,l=e.className,m=e.loading,h=e.loadingTemplate,f=e.errorTemplate,v=p(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),x=(0,d.Z)(o.VT,v),y=x.chart,g=x.container;return(0,i.useEffect)((function(){(0,s.J)(a,y.current)}),[y.current]),(0,i.useImperativeHandle)(t,(function(){return{getChart:function(){return y.current}}})),i.createElement(c.Z,{errorTemplate:f},m&&i.createElement(u.Z,{loadingTemplate:h,theme:e.theme}),i.createElement("div",{className:l,style:n,ref:g}))})),v=a(92754),x=a(1898),y=a(10658),g=a.n(y),j=a(96216),Z=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(a[r[i]]=e[r[i]])}return a},O=(0,i.forwardRef)((function(e,t){var a=e.chartRef,r=e.style,n=void 0===r?{height:"inherit"}:r,l=e.className,m=e.loading,h=e.loadingTemplate,p=e.errorTemplate,f=Z(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),v=(0,d.Z)(o.uN,f),x=v.chart,y=v.container;return(0,i.useEffect)((function(){(0,s.J)(a,x.current)}),[x.current]),(0,i.useImperativeHandle)(t,(function(){return{getChart:function(){return x.current}}})),i.createElement(c.Z,{errorTemplate:p},m&&i.createElement(u.Z,{loadingTemplate:h,theme:e.theme}),i.createElement("div",{className:l,style:n,ref:y}))})),b=a(80323),w=a(40056),F=a(74165),P=a(15861),S=a(43144),I=a(15671),T=a(96675),k=new((0,S.Z)((function e(){(0,I.Z)(this,e),this.getData=(0,P.Z)((0,F.Z)().mark((function e(){var t,a,r,i,n,l,o,d;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Z.get("/overview/ps");case 2:if(1===(t=e.sent).code){e.next=5;break}return e.abrupt("return",{});case 5:for(a=t.data,r=[],i=0;i<a.netIO.length;i++)n=a.netIO[i],r.push({time:n.time,read:n.read/1024/1024/1024,write:n.write/1024/1024/1024});for(a.netIO=r,l=[],o=0;o<a.diskIO.length;o++)d=a.diskIO[o],l.push({time:d.time,read:d.read/1024/1024/1024,write:d.write/1024/1024/1024});return a.diskIO=l,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))}))),E=a(46417),N=v.Z.Statistic,C={loadStat:{load1:0,load5:0,load15:0,percent:0},mem:{total:0,available:0,usedPercent:0},cpu:{count:0,usedPercent:0,info:[{modelName:""}]},disk:{total:0,available:0,usedPercent:0},diskIO:[],netIO:[],cpuStat:[],memStat:[]},D=function(){var e,t,a,i,o=(0,w.useQuery)("getMonitorData",k.getData,{initialData:C,refetchInterval:5e3}),d=null===(e=o.data)||void 0===e?void 0:e.loadStat.percent,s="#5B8FF9";d>.9?s="#F4664A":d>.8?s="#001D70":d>.7&&(s="#0047A5");var c={height:100,width:100,shape:function(e,t,a,r){var i=a/4,n=e-a/2,l=t-r/2;return[["M",n,l+2*i],["A",i,i,0,0,1,e,l+i],["A",i,i,0,0,1,n+a,l+2*i],["L",e,l+r],["L",n,l+2*i],["Z"]]},percent:d,outline:{border:4,distance:4},wave:{length:64},theme:{styleSheet:{brandColor:s}},statistic:{title:!1,content:!1},pattern:{type:"square"}},u=(null===(t=o.data)||void 0===t?void 0:t.cpu.usedPercent)/100,m="#5B8FF9";u>.9?m="#F4664A":u>.8&&(m="#001D70");var p={height:100,width:100,shape:"diamond",percent:u,outline:{border:4,distance:4},wave:{length:64},theme:{styleSheet:{brandColor:m}},pattern:{type:"line"},statistic:{title:!1,content:!1}},y=(null===(a=o.data)||void 0===a?void 0:a.mem.usedPercent)/100,Z="#5B8FF9";y>.75&&(Z="#F4664A");var F={height:100,width:100,percent:y,outline:{border:4,distance:4},wave:{length:64},theme:{styleSheet:{brandColor:Z}},statistic:{title:!1,content:!1},pattern:{type:"dot"}},P=(null===(i=o.data)||void 0===i?void 0:i.disk.usedPercent)/100,S="#5B8FF9";P>.9?S="#F4664A":P>.8&&(S="#001D70");var I,T={height:100,width:100,shape:"rect",percent:P,outline:{border:4,distance:4},wave:{length:64},theme:{styleSheet:{brandColor:S}},pattern:{type:"line"},statistic:{title:!1,content:!1}},D={height:150,data:[o.data.diskIO,o.data.diskIO],xField:"time",yField:["read","write"],meta:{read:{alias:"\u8bfb\u53d6\uff08MB/s\uff09"},write:{alias:"\u5199\u5165\uff08MB/s\uff09"}},geometryOptions:[{geometry:"line",color:"#5B8FF9",smooth:!0},{geometry:"line",color:"#5AD8A6",smooth:!0}]},A={height:150,data:[o.data.netIO,o.data.netIO],xField:"time",yField:["read","write"],meta:{read:{alias:"\u63a5\u6536\uff08MB/s\uff09"},write:{alias:"\u53d1\u9001\uff08MB/s\uff09"}},geometryOptions:[{geometry:"line",color:"#5B8FF9",smooth:!0},{geometry:"line",color:"#5AD8A6",smooth:!0}]},B={height:150,data:o.data.cpuStat,xField:"time",yField:"value",smooth:!0,areaStyle:{fill:"#d6e3fd"}},R={height:150,data:o.data.memStat,xField:"time",yField:"value",smooth:!0,areaStyle:{fill:"#d6e3fd"}},M=o.data.cpu.info[0].modelName.length>10?o.data.cpu.info[0].modelName.substring(0,10)+"...":o.data.cpu.info[0].modelName;return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("div",{style:{margin:16},children:(0,E.jsxs)(x.Z,{title:"\u7cfb\u7edf\u76d1\u63a7",extra:g()().format("YYYY[\u5e74]MM[\u6708]DD[\u65e5]")+" "+(0,b.E)(g()().day()),split:"horizontal",headerBordered:!0,bordered:!0,children:[(0,E.jsxs)(x.Z,{split:"vertical",children:[(0,E.jsxs)(x.Z,{children:[(0,E.jsx)(v.Z,{statistic:{title:"\u8d1f\u8f7d",value:(I=o.data.loadStat.percent,I>=.9?"\u5835\u585e":I>=.8?"\u7f13\u6162":I>=.7?"\u6b63\u5e38":"\u6d41\u7545"),description:(0,E.jsxs)(n.Z,{direction:"vertical",size:1,children:[(0,E.jsx)(N,{title:"Load1",value:o.data.loadStat.load1.toFixed(2)}),(0,E.jsx)(N,{title:"Load5",value:o.data.loadStat.load5.toFixed(2)}),(0,E.jsx)(N,{title:"Load15",value:o.data.loadStat.load15.toFixed(2)})]})},chart:(0,E.jsx)(h,(0,r.Z)({},c)),chartPlacement:"left"}),(0,E.jsx)(v.Z,{statistic:{title:"CPU",value:o.data.cpu.count,suffix:"\u4e2a",description:(0,E.jsxs)(n.Z,{direction:"vertical",size:1,children:[(0,E.jsx)(N,{title:"\u5229\u7528\u7387",value:o.data.cpu.usedPercent.toFixed(2)+"%"}),(0,E.jsx)(N,{title:"\u7269\u7406\u6838\u6570",value:o.data.cpu.phyCount+" \u4e2a"}),(0,E.jsx)(l.Z,{title:o.data.cpu.info[0].modelName,children:(0,E.jsx)(N,{title:"\u578b\u53f7",value:M})})]})},chart:(0,E.jsx)(h,(0,r.Z)({},p)),chartPlacement:"left"})]}),(0,E.jsxs)(x.Z,{children:[(0,E.jsx)(v.Z,{statistic:{title:"\u5185\u5b58",value:(0,j.$j)(o.data.mem.total),description:(0,E.jsxs)(n.Z,{direction:"vertical",size:1,children:[(0,E.jsx)(N,{title:"\u5229\u7528\u7387",value:o.data.mem.usedPercent.toFixed(2)+"%"}),(0,E.jsx)(N,{title:"\u53ef\u7528\u7684",value:(0,j.$j)(o.data.mem.available)}),(0,E.jsx)(N,{title:"\u5df2\u4f7f\u7528",value:(0,j.$j)(o.data.mem.used)})]})},chart:(0,E.jsx)(h,(0,r.Z)({},F)),chartPlacement:"left"}),(0,E.jsx)(v.Z,{statistic:{title:"\u786c\u76d8",value:(0,j.$j)(o.data.disk.total),description:(0,E.jsxs)(n.Z,{direction:"vertical",size:1,children:[(0,E.jsx)(N,{title:"\u5229\u7528\u7387",value:o.data.disk.usedPercent.toFixed(2)+"%"}),(0,E.jsx)(N,{title:"\u5269\u4f59\u7684",value:(0,j.$j)(o.data.disk.available)}),(0,E.jsx)(N,{title:"\u5df2\u4f7f\u7528",value:(0,j.$j)(o.data.disk.used)})]})},chart:(0,E.jsx)(h,(0,r.Z)({},T)),chartPlacement:"left"})]})]}),(0,E.jsxs)(x.Z,{split:"vertical",children:[(0,E.jsx)(x.Z,{title:"CPU\u8d1f\u8f7d",children:(0,E.jsx)(O,(0,r.Z)({},B))}),(0,E.jsx)(x.Z,{title:"\u5185\u5b58\u8d1f\u8f7d",children:(0,E.jsx)(O,(0,r.Z)({},R))})]}),(0,E.jsxs)(x.Z,{split:"vertical",children:[(0,E.jsx)(x.Z,{title:"\u7f51\u7edc\u541e\u5410",children:(0,E.jsx)(f,(0,r.Z)({onlyChangeData:!0},A))}),(0,E.jsx)(x.Z,{title:"\u78c1\u76d8IO",children:(0,E.jsx)(f,(0,r.Z)({onlyChangeData:!0},D))})]})]})})})}},80323:function(e,t,a){a.d(t,{E:function(){return i}});var r={1:"\u4e00",2:"\u4e8c",3:"\u4e09",4:"\u56db",5:"\u4e94",6:"\u516d",0:"\u65e5"},i=function(e){return"\u661f\u671f"+r[e]}}}]);