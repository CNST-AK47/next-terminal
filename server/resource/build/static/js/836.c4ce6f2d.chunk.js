"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[836],{58374:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(74165),a=r(15861),c=r(43144),u=r(15671),s=r(96675),i=r(74776),o=r.n(i),d=(0,c.Z)((function e(t){var r=this;(0,u.Z)(this,e),this.group="",this.getById=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("/".concat(r.group,"/").concat(t));case 2:if(1===(a=e.sent).code){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPaging=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o().stringify(t),e.next=3,s.Z.get("/".concat(r.group,"/paging?").concat(a));case 3:if(1===(c=e.sent).code){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAll=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("/".concat(r.group));case 2:if(1===(t=e.sent).code){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)}))),this.create=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post("/".concat(r.group),t);case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateById=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,a){var c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.put("/".concat(r.group,"/").concat(t),a);case 2:return c=e.sent,e.abrupt("return",1===c.code);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.deleteById=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.delete("/".concat(r.group,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",1===a.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.group=t}))},9388:function(e,t,r){r.d(t,{f:function(){return n}});var n={rdp:"cyan",ssh:"blue",telnet:"geekblue",vnc:"purple",kubernetes:"volcano"}},20836:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var n=r(74165),a=r(15861),c=r(44925),u=r(47313),s=r(66204),i=r(74294),o=r(57325),d=r(41068),l=r(53469),p=r(9388),f=r(99925),h=r(40056),Z=r(43144),v=r(15671),x=r(60136),g=r(27277),m=r(58374),y=r(96675),b=new(function(e){(0,x.Z)(r,e);var t=(0,g.Z)(r);function r(){var e;return(0,v.Z)(this,r),(e=t.call(this,"worker/assets")).tags=(0,a.Z)((0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.Z.get("/".concat(e.group,"/tags"));case 2:if(1===(r=t.sent).code){t.next=5;break}return t.abrupt("return",[]);case 5:return t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)}))),e}return(0,Z.Z)(r)}(m.Z)),j=r(10658),k=r.n(j),w=r(46417),I=["type","defaultRender"],O=["type","defaultRender"],R=["type","defaultRender"],T=u.createRef(),S=function(){var e=(0,h.useQuery)("getAllTag",b.tags),t=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540d\u79f0",dataIndex:"name",sorter:!0,render:function(e,t){return"-"===t.description&&(t.description=""),(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{children:e}),(0,w.jsx)("div",{style:{color:"rgba(0, 0, 0, 0.45)",lineHeight:1.45,fontSize:"14px"},children:t.description})]})}},{title:"\u534f\u8bae",dataIndex:"protocol",key:"protocol",sorter:!0,render:function(e,t){return(0,w.jsx)(s.Z,{color:p.f[e],children:e})},renderFormItem:function(e,t,r){var n=t.type;t.defaultRender,(0,c.Z)(t,I);return"form"===n?null:(0,w.jsxs)(i.Z,{children:[(0,w.jsx)(i.Z.Option,{value:"rdp",children:"RDP"}),(0,w.jsx)(i.Z.Option,{value:"ssh",children:"SSH"}),(0,w.jsx)(i.Z.Option,{value:"telnet",children:"Telnet"}),(0,w.jsx)(i.Z.Option,{value:"kubernetes",children:"Kubernetes"})]})}},{title:"\u6807\u7b7e",dataIndex:"tags",key:"tags",render:function(e){if(f.Z.hasText(e))return e.split(",").filter((function(e){return"-"!==e})).map((function(e){return(0,w.jsx)(s.Z,{children:e},e)}))},renderFormItem:function(t,r,n){var a,u=r.type;r.defaultRender,(0,c.Z)(r,O);return"form"===u?null:(0,w.jsx)(i.Z,{mode:"multiple",allowClear:!0,children:null===(a=e.data)||void 0===a?void 0:a.map((function(e){if("-"!==e)return(0,w.jsx)(i.Z.Option,{children:e},e)}))})}},{title:"\u72b6\u6001",dataIndex:"active",key:"active",sorter:!0,render:function(e,t){return!0===t.testing?(0,w.jsx)(o.Z,{title:"\u6d4b\u8bd5\u4e2d",children:(0,w.jsx)(d.Z,{status:"processing",text:"\u6d4b\u8bd5\u4e2d"})}):e?(0,w.jsx)(o.Z,{title:"\u8fd0\u884c\u4e2d",children:(0,w.jsx)(d.Z,{status:"success",text:"\u8fd0\u884c\u4e2d"})}):(0,w.jsx)(o.Z,{title:t.activeMessage,children:(0,w.jsx)(d.Z,{status:"error",text:"\u4e0d\u53ef\u7528"})})},renderFormItem:function(e,t,r){var n=t.type;t.defaultRender,(0,c.Z)(t,R);return"form"===n?null:(0,w.jsxs)(i.Z,{children:[(0,w.jsx)(i.Z.Option,{value:"true",children:"\u8fd0\u884c\u4e2d"}),(0,w.jsx)(i.Z.Option,{value:"false",children:"\u4e0d\u53ef\u7528"})]})}},{title:"\u6700\u540e\u63a5\u5165\u65f6\u95f4",key:"lastAccessTime",sorter:!0,dataIndex:"lastAccessTime",hideInSearch:!0,render:function(e,t){return"0001-01-01 00:00:00"===e?"-":(0,w.jsx)(o.Z,{title:e,children:k()(e).fromNow()})}},{title:"\u64cd\u4f5c",valueType:"option",key:"option",render:function(e,t,r,n){var a=t.id,c=t.protocol,u=t.name,s="";return s="ssh"===c?"#/term?assetId=".concat(a,"&assetName=").concat(u,"&isWorker=true"):"#/access?assetId=".concat(a,"&assetName=").concat(u,"&protocol=").concat(c),[(0,w.jsx)("a",{href:s,rel:"noreferrer",target:"_blank",children:"\u63a5\u5165"},"access")]}}];return(0,w.jsx)("div",{children:(0,w.jsx)(l.Z,{columns:t,actionRef:T,request:(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a,c,u,s,i,o=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},a=o.length>1?o[1]:void 0,o.length>2?o[2]:void 0,c="",u="",Object.keys(a).length>0&&(c=Object.keys(a)[0],u=Object.values(a)[0]),s={pageIndex:r.current,pageSize:r.pageSize,name:r.name,type:r.type,protocol:r.protocol,active:r.active,tags:null===(t=r.tags)||void 0===t?void 0:t.join(","),field:c,order:u},e.next=9,b.getPaging(s);case 9:return i=e.sent,e.abrupt("return",{data:i.items,success:!0,total:i.total});case 11:case"end":return e.stop()}}),e)}))),rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u8d44\u4ea7\u5217\u8868"})})}},99925:function(e,t,r){var n=r(43144),a=r(15671),c=new((0,n.Z)((function e(){(0,a.Z)(this,e),this.hasText=function(e){return!(void 0===e||null===e||0===e.length)},this.zeroPad=function(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r}})));t.Z=c}}]);