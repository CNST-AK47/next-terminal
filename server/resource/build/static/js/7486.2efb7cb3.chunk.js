"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[7486],{48922:function(n,t,e){var i,o=e(15671),r=e(43144),a=(i=function(){function n(t,e){(0,o.Z)(this,n),this.type=t,this.content=e}return(0,r.Z)(n,[{key:"toString",value:function(){return this.type+this.content}}],[{key:"parse",value:function(t){return new n(parseInt(t.substring(0,1)),t.substring(1,t.length))}}]),n}(),i.Closed=0,i.Connected=1,i.Data=2,i.Resize=3,i.Ping=4,i);t.Z=a},47534:function(n,t,e){e.r(t);var i=e(29439),o=e(47313),r=e(60786),a=e(60270),c=e(96216),s=e(68086),u=e(74776),d=e.n(u),l=e(34868),f=e(48922),h=e(2135),w=(e(66641),e(46417));t.default=function(){var n=(0,h.lr)(),t=(0,i.Z)(n,1)[0].get("sessionId"),e=(0,o.useState)({width:window.innerWidth,height:window.innerHeight}),u=(0,i.Z)(e,2),g=u[0],m=u[1];return(0,o.useEffect)((function(){var n=function(n){var t=new r.Terminal({fontFamily:'monaco, Consolas, "Lucida Console", monospace',fontSize:14,theme:{background:"#1b1b1b"}});t.open(document.getElementById("terminal"));var e=new a.FitAddon;t.loadAddon(e),e.fit(),t.focus(),t.writeln("\u7b49\u5f85\u7528\u6237\u8f93\u5165\u4e2d..."),t.onData((function(n){}));var i={"X-Auth-Token":(0,c.LP)()},o=d().stringify(i),s=!0,u=new WebSocket("".concat(l.tC,"/sessions/").concat(n,"/ssh-monitor?").concat(o));return u.onmessage=function(n){var e=f.Z.parse(n.data);switch(e.type){case f.Z.Connected:t.clear();break;case f.Z.Data:!0===s&&(s=!1,t.clear()),t.write(e.content);break;case f.Z.Closed:t.writeln("\x1b[1;3;31m".concat(e.content,"\x1b[0m ")),u.close()}},[u,e]}(t),e=(0,i.Z)(n,2),o=e[0],u=e[1],h=(0,s.D)((function(){!function(n){n&&(m((function(){return{width:window.innerWidth,height:window.innerHeight}})),n.fit())}(u)}));return window.addEventListener("resize",h),function(){o&&o.close(),window.removeEventListener("resize",h)}}),[t]),(0,w.jsx)("div",{id:"terminal",style:{width:g.width,height:g.height,backgroundColor:"#1b1b1b"}})}},68086:function(n,t,e){e.d(t,{D:function(){return i}});var i=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,e=null;return function(){var i=arguments,o=this;e&&clearTimeout(e),e=setTimeout((function(){n.apply(o,i),e=null}),t)}}}}]);